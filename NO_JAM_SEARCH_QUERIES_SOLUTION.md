# –†–µ—à–µ–Ω–∏–µ: –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ë–ï–ó –ø–æ–¥–ø–∏—Å–∫–∏ Jam

## –ü—Ä–æ–±–ª–µ–º–∞
WB Search Report API (`/api/v2/search-report/*`) **—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Jam**. –ë–µ–∑ –Ω–µ—ë:
- `/api/v2/search-report/product/search-texts` ‚Üí 403 –∏–ª–∏ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- `/api/v2/search-report/report` ‚Üí 403 –∏–ª–∏ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- `/api/v2/search-report/product/orders` ‚Üí 403

## –†–µ—à–µ–Ω–∏–µ: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–ë–ï–ó Jam)

### 1. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π ‚úÖ
**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /adv/v0/normquery/stats`
**–¢—Ä–µ–±—É–µ—Ç:** –¢–æ–∫–µ–Ω –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ"
**–ù–µ —Ç—Ä–µ–±—É–µ—Ç:** Jam

**–ß—Ç–æ –¥–∞—ë—Ç:**
- –°–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –ø–æ –∫–æ—Ç–æ—Ä—ã–º –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å —Ä–µ–∫–ª–∞–º–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫–∞–∑–æ–≤, –∫–ª–∏–∫–æ–≤, –∑–∞–∫–∞–∑–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–ª—é—á—É
- CTR, –∫–æ–Ω–≤–µ—Ä—Å–∏—è

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ:**
```typescript
// –°—Ç—Ä–æ–∫–∞ 656-700
// –ï—Å–ª–∏ –µ—Å—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏ ‚Üí –ø–æ–ª—É—á–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
// –ï—Å–ª–∏ –Ω–µ—Ç Search Report –¥–∞–Ω–Ω—ã—Ö ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∫–∞–∫ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
if (data.searchQueries.length === 0 && data.keywordStats.length > 0) {
  data.searchQueries = data.keywordStats.map((kw: any) => ({
    searchText: kw.keyword || kw.query,
    orders: kw.orders || 0,
    openCard: kw.views || 0,
    source: 'advert'
  }));
}
```

### 2. Grouped History (deprecated, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç) ‚úÖ
**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v2/nm-report/grouped/history`
**–¢—Ä–µ–±—É–µ—Ç:** –¢–æ–∫–µ–Ω –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"
**–ù–µ —Ç—Ä–µ–±—É–µ—Ç:** Jam
**–°—Ç–∞—Ç—É—Å:** Deprecated (–±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω 9 –¥–µ–∫–∞–±—Ä—è)

**–ß—Ç–æ –¥–∞—ë—Ç:**
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥—Ä—É–ø–ø–∞–º —Ç–æ–≤–∞—Ä–æ–≤ (–ø–æ –ø—Ä–µ–¥–º–µ—Ç—É/–±—Ä–µ–Ω–¥—É/—è—Ä–ª—ã–∫—É)
- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã, –∑–∞–∫–∞–∑—ã, –∫–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –¥–Ω—è–º
- –ù–ï –¥–∞—ë—Ç –ø—Ä—è–º—ã—Ö –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–æ –¥–∞—ë—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ:**
```typescript
// –°—Ç—Ä–æ–∫–∞ 702-738
// –ï—Å–ª–∏ –Ω–µ—Ç Search Report –¥–∞–Ω–Ω—ã—Ö –∏ –µ—Å—Ç—å subjectId
if (data.searchQueries.length === 0 && subjectId && daysAgo <= 120) {
  // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º grouped history
}
```

### 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ) ‚úÖ
**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /api/v1/supplier/sales`
**–ù–µ —Ç—Ä–µ–±—É–µ—Ç:** Jam

**–ß—Ç–æ –¥–∞—ë—Ç:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–∞–∂–¥–æ–π –ø—Ä–æ–¥–∞–∂–µ
- –ú–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–¥–∞–∂ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

### 4. –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ) ‚úÖ
**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/analytics/v3/sales-funnel/products/history`
**–ù–µ —Ç—Ä–µ–±—É–µ—Ç:** Jam
**–õ–∏–º–∏—Ç:** 365 –¥–Ω–µ–π

**–ß—Ç–æ –¥–∞—ë—Ç:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É, –∑–∞–∫–∞–∑—ã –ø–æ –¥–Ω—è–º
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

## –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∫–æ–¥–µ

### –ö–∞—Å–∫–∞–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
1. **–ü–æ–ø—ã—Ç–∫–∞ 1:** `product/search-texts` (—Ç—Ä–µ–±—É–µ—Ç Jam)
2. **–ü–æ–ø—ã—Ç–∫–∞ 2:** `search-report/report` –ø–æ nmIds (—Ç—Ä–µ–±—É–µ—Ç Jam)
3. **–ü–æ–ø—ã—Ç–∫–∞ 3:** `search-report/report` –ø–æ subjectIds (—Ç—Ä–µ–±—É–µ—Ç Jam)
4. **Fallback –ë–ï–ó Jam:** –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã
5. **Fallback –ë–ï–ó Jam:** Grouped history (deprecated)

### –õ–æ–≥–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:
```
üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (product/search-texts): 0
‚Ü™Ô∏è product/search-texts –≤–µ—Ä–Ω—É–ª 0 ‚Äî –ø—Ä–æ–±—É–µ–º fallback –æ—Ç—á—ë—Ç—ã
‚ÑπÔ∏è Search Report API —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Jam. –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (—Ä–µ–∫–ª–∞–º–∞, grouped history)
üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã: 15
üí° –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã –∫–∞–∫ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (NO JAM fallback)
```

## –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ü–û–õ–ù–´–ï –¥–∞–Ω–Ω—ã–µ (—Å Jam)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å Jam
1. –ó–∞–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç WB Seller
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É "–î–∂–µ–º" (–ø–ª–∞—Ç–Ω–∞—è)
3. –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Search Report

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Search Report (–µ—Å–ª–∏ –µ—Å—Ç—å Jam)
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ Jam –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç grouped history –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## –ü–æ—á–µ–º—É "0 –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤"?

### –ü—Ä–∏—á–∏–Ω–∞ 1: –ù–µ—Ç Jam –ø–æ–¥–ø–∏—Å–∫–∏
- Search Report API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏)

### –ü—Ä–∏—á–∏–Ω–∞ 2: –ù–µ—Ç —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
- –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä –Ω–µ —Ä–µ–∫–ª–∞–º–∏—Ä—É–µ—Ç—Å—è ‚Üí –Ω–µ—Ç –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —Ä–µ–∫–ª–∞–º–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Jam

### –ü—Ä–∏—á–∏–Ω–∞ 3: –¢–æ–≤–∞—Ä –Ω–æ–≤—ã–π / –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- WB –Ω–µ —Å–æ–±—Ä–∞–ª –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∞—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ë–ï–ó Jam

1. **–ï—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–∫–ª–∞–º–∞:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ –∫–∞–º–ø–∞–Ω–∏–π –∫–∞–∫ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - –¢–æ—á–Ω–æ—Å—Ç—å: –≤—ã—Å–æ–∫–∞—è (—Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ –∫–æ—Ç–æ—Ä—ã–º –∫–ª–∏–∫–∞–ª–∏)

2. **–ï—Å–ª–∏ –Ω–µ—Ç —Ä–µ–∫–ª–∞–º—ã:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤–æ—Ä–æ–Ω–∫–∏ (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –∑–∞–∫–∞–∑—ã)
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º grouped history –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –¢–æ—á–Ω–æ—Å—Ç—å: —Å—Ä–µ–¥–Ω—è—è (–Ω–µ—Ç –ø—Ä—è–º—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤)

3. **–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:**
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å Jam
   - –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ä–µ–∫–ª–∞–º–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é

## –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

‚úÖ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã ‚Üí –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
‚úÖ Grouped history –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –±–µ–∑ Jam
‚úÖ –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ (365 –¥–Ω–µ–π)
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ (–≤—Å—è –∏—Å—Ç–æ—Ä–∏—è)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ "–£–º–Ω—ã–π –ø–æ–∏—Å–∫" –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
- –ï—Å–ª–∏ –µ—Å—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏ ‚Üí —É–≤–∏–¥–∏—Ç–µ "üí° –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã"
- –ï—Å–ª–∏ –Ω–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π –∏ –Ω–µ—Ç Jam ‚Üí —É–≤–∏–¥–∏—Ç–µ "‚ÑπÔ∏è Search Report API —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Jam"
- –í –∏—Ç–æ–≥–æ–≤–æ–º JSON –±—É–¥—É—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
