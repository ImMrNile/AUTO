# –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Search Report —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–æ–¥–ø–∏—Å–∫–æ–π Jam

## –ü—Ä–æ–±–ª–µ–º–∞
–£ –≤–∞—Å –µ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞ Jam (—á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–∞—Ä–∏—Ñ–æ–≤), –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ WB, –Ω–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ.

## –ü—Ä–∏—á–∏–Ω–∞
–í–∞—à —Ç–µ–∫—É—â–∏–π API —Ç–æ–∫–µ–Ω –±—ã–ª —Å–æ–∑–¥–∞–Ω –ë–ï–ó –ø—Ä–∞–≤ –Ω–∞ Search Report API –∏–ª–∏ –î–û –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Jam.

## –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ Search Report

### –®–∞–≥ 1: –ó–∞–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://seller.wildberries.ru/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–î–æ—Å—Ç—É–ø –∫ API**
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"**

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω"** –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"
2. –í —Å–ø–∏—Å–∫–µ –ø—Ä–∞–≤ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –æ—Ç–º–µ—Ç—å—Ç–µ:
   - ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (–æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
   - ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞** (nm-report)
   - ‚úÖ **–ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** ‚Üê **–≠–¢–û –ì–õ–ê–í–ù–û–ï!**
   - ‚úÖ **–í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂**
   - ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤**
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**
4. **–°–ö–û–ü–ò–†–£–ô–¢–ï —Ç–æ–∫–µ–Ω** (–æ–Ω –ø–æ–∫–∞–∂–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–æ–∫–µ–Ω
1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à —Ç–µ–∫—É—â–∏–π —Ç–æ–∫–µ–Ω –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"
2. –ù–∞–∂–º–∏—Ç–µ **"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"** –∏–ª–∏ **"–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞"**
3. –î–æ–±–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É **"–ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã"**
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
5. **–í–æ–∑–º–æ–∂–Ω–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å** ‚Äî –Ω–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω"

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ .env
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å —Ç–æ–∫–µ–Ω–æ–º –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (–æ–±—ã—á–Ω–æ `WB_ANALYTICS_TOKEN` –∏–ª–∏ `WB_API_TOKEN`)
3. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω:
```env
WB_ANALYTICS_TOKEN=–≤–∞—à_–Ω–æ–≤—ã–π_—Ç–æ–∫–µ–Ω_—Å_–ø—Ä–∞–≤–∞–º–∏_–Ω–∞_search_report
```
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª
5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** (`npm run dev`)

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ —Ç–æ–∫–µ–Ω–∞
–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:
```bash
curl -X POST https://seller-analytics-api.wildberries.ru/api/v2/search-report/report \
  -H "Authorization: –≤–∞—à_–Ω–æ–≤—ã–π_—Ç–æ–∫–µ–Ω" \
  -H "Content-Type: application/json" \
  -d '{
    "currentPeriod": {"start": "2025-11-01", "end": "2025-11-04"},
    "pastPeriod": {"start": "2025-10-25", "end": "2025-10-28"},
    "nmIds": [493805274],
    "positionCluster": "all",
    "orderBy": {"field": "openCard", "mode": "desc"},
    "includeSubstitutedSKUs": true,
    "includeSearchTexts": true,
    "limit": 50,
    "offset": 0
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç–∞—Ç—É—Å 200 + –¥–∞–Ω–Ω—ã–µ –≤ `data.items` –∏–ª–∏ `data.groups`
- ‚ùå –°—Ç–∞—Ç—É—Å 403 ‚Üí —Ç–æ–∫–µ–Ω –≤—Å—ë –µ—â—ë –±–µ–∑ –ø—Ä–∞–≤
- ‚ùå –°—Ç–∞—Ç—É—Å 400 ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

## –í–∞–∂–Ω–æ: –ö–∞–∫–∏–µ –ø—Ä–∞–≤–∞ –Ω—É–∂–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ API

### –î–ª—è Search Report (—Ç—Ä–µ–±—É–µ—Ç Jam):
- `/api/v2/search-report/report` ‚Üí –ø—Ä–∞–≤–æ **"–ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã"**
- `/api/v2/search-report/product/search-texts` ‚Üí –ø—Ä–∞–≤–æ **"–ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã"**
- `/api/v2/search-report/product/orders` ‚Üí –ø—Ä–∞–≤–æ **"–ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã"**

### –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö (–ë–ï–ó Jam):
- `/api/analytics/v3/sales-funnel/products` ‚Üí –ø—Ä–∞–≤–æ **"–í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂"**
- `/api/v2/nm-report/detail` ‚Üí –ø—Ä–∞–≤–æ **"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞"**
- `/api/v1/supplier/sales` ‚Üí –ø—Ä–∞–≤–æ **"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"** (—Ç–æ–∫–µ–Ω –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")

## –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ü–æ–¥–ø–∏—Å–∫–∞ Jam –∞–∫—Ç–∏–≤–Ω–∞?
1. –ó–∞–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–¢–∞—Ä–∏—Ñ—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∏**
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ **"–î–∂–µ–º"** –∞–∫—Ç–∏–≤–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –¢–æ–∫–µ–Ω –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏?
- Search Report —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ **"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"**
- –ù–ï "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", –ù–ï "–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ"

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ü—Ä–∞–≤–∞ —Ç–æ–∫–µ–Ω–∞
–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ:
```
–¢–æ–∫–µ–Ω: eyJhbG...
–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
–ü—Ä–∞–≤–∞:
  ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
  ‚úÖ –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã ‚Üê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
  ‚úÖ –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å —Ä–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

### .env —Ñ–∞–π–ª:
```env
# –¢–æ–∫–µ–Ω –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–ø—Ä–æ–¥–∞–∂–∏)
WB_STATISTICS_TOKEN=—Ç–æ–∫–µ–Ω_–∫–∞—Ç–µ–≥–æ—Ä–∏–∏_—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

# –¢–æ–∫–µ–Ω –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (–≤–æ—Ä–æ–Ω–∫–∞, nm-report)
WB_ANALYTICS_TOKEN=—Ç–æ–∫–µ–Ω_–∫–∞—Ç–µ–≥–æ—Ä–∏–∏_–∞–Ω–∞–ª–∏—Ç–∏–∫–∞_–ë–ï–ó_search_report

# –¢–æ–∫–µ–Ω –¥–ª—è Search Report (—Å Jam)
WB_SEARCH_REPORT_TOKEN=—Ç–æ–∫–µ–Ω_–∫–∞—Ç–µ–≥–æ—Ä–∏–∏_–∞–Ω–∞–ª–∏—Ç–∏–∫–∞_–°_–ø—Ä–∞–≤–∞–º–∏_–Ω–∞_search_report

# –¢–æ–∫–µ–Ω –¥–ª—è —Ä–µ–∫–ª–∞–º—ã
WB_ADVERT_TOKEN=—Ç–æ–∫–µ–Ω_–∫–∞—Ç–µ–≥–æ—Ä–∏–∏_–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ
```

### –ö–æ–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```typescript
// –í smart-optimization-data/route.ts
const analyticsToken = process.env.WB_ANALYTICS_TOKEN;
const searchReportToken = process.env.WB_SEARCH_REPORT_TOKEN || analyticsToken;

// –î–ª—è Search Report –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
const searchResponse = await fetch('...search-report/report', {
  headers: {
    'Authorization': searchReportToken, // ‚Üê —Ç–æ–∫–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ Search Report
    ...
  }
});
```

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

1. ‚úÖ **–ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç–µ —Ç–æ–∫–µ–Ω** —Å –≥–∞–ª–æ—á–∫–æ–π "–ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã"
2. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç–µ .env** —Ñ–∞–π–ª
3. ‚úÖ **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**
4. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/test-ai-optimization`

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (product/search-texts): 15
üßæ –ó–∞–∫–∞–∑—ã –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º: 15
```

–í–º–µ—Å—Ç–æ:
```
üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (product/search-texts): 0
‚ÑπÔ∏è Search Report API —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Jam...
```

## –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É WB:
- –¢–µ–º–∞: "API Search Report –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ Jam"
- –£–∫–∞–∂–∏—Ç–µ: ID –ø—Ä–æ–¥–∞–≤—Ü–∞, –¥–∞—Ç—É –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Jam, —Å–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–∞–≤ —Ç–æ–∫–µ–Ω–∞
- –û–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ 1-2 –¥–Ω—è

## –î–æ 9 –¥–µ–∫–∞–±—Ä—è (–ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç grouped history)

–î–∞–∂–µ –µ—Å–ª–∏ Search Report –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç, —É –≤–∞—Å –µ—Å—Ç—å:
1. ‚úÖ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã (–ë–ï–ó Jam)
2. ‚úÖ Grouped history (–ë–ï–ó Jam, deprecated –¥–æ 9 –¥–µ–∫–∞–±—Ä—è)
3. ‚úÖ –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ (–ë–ï–ó Jam)
4. ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ (–ë–ï–ó Jam)

–ü–æ—Å–ª–µ 9 –¥–µ–∫–∞–±—Ä—è grouped history —É–¥–∞–ª—è—Ç, –æ—Å—Ç–∞–Ω—É—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç—ã 1, 3, 4.
