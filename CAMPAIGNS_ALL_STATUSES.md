# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –ü–æ–∏—Å–∫ –í–°–ï–• –∫–∞–º–ø–∞–Ω–∏–π (–≤–∫–ª—é—á–∞—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ)

## –ü—Ä–æ–±–ª–µ–º–∞

–°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏–ª–∞ **—Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏** (—Å—Ç–∞—Ç—É—Å 9), –ø—Ä–æ–ø—É—Å–∫–∞—è:
- ‚ùå –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ (—Å—Ç–∞—Ç—É—Å 7)
- ‚ùå –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ (—Å—Ç–∞—Ç—É—Å 11)
- ‚ùå –ì–æ—Ç–æ–≤—ã–µ –∫ –∑–∞–ø—É—Å–∫—É (—Å—Ç–∞—Ç—É—Å 4)
- ‚ùå –û—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–µ (—Å—Ç–∞—Ç—É—Å 8)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π, —Ö–æ—Ç—è –æ–Ω–∏ –±—ã–ª–∏.

## –†–µ—à–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–∞–º–ø–∞–Ω–∏–∏ **—Å–æ –≤—Å–µ–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏**:

```typescript
const statuses = [4, 7, 8, 9, 11];
// 4 - –≥–æ—Ç–æ–≤–∞ –∫ –∑–∞–ø—É—Å–∫—É
// 7 - –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (–∑–∞–∫–æ–Ω—á–∏–ª—Å—è –±—é–¥–∂–µ—Ç)
// 8 - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π
// 9 - –∞–∫—Ç–∏–≤–Ω–∞ (–∏–¥—ë—Ç –ø–æ–∫–∞–∑)
// 11 - –Ω–∞ –ø–∞—É–∑–µ

for (const status of statuses) {
  const campaignsResponse = await fetch(
    'https://advert-api.wildberries.ru/adv/v1/promotion/adverts',
    {
      method: 'POST',
      body: JSON.stringify([status])  // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ –æ–¥–Ω–æ–º—É —Å—Ç–∞—Ç—É—Å—É
    }
  );
  
  if (campaignsResponse.ok) {
    const campaigns = await campaignsResponse.json();
    allCampaigns.push(...campaigns);
  }
}
```

## –°—Ç–∞—Ç—É—Å—ã –∫–∞–º–ø–∞–Ω–∏–π WB

| –°—Ç–∞—Ç—É—Å | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–∫–∞–ª–∏ —Ä–∞–Ω—å—à–µ | –ò—â–µ–º —Ç–µ–ø–µ—Ä—å |
|--------|-----|----------|---------------|-------------|
| –ì–æ—Ç–æ–≤–∞ –∫ –∑–∞–ø—É—Å–∫—É | 4 | –°–æ–∑–¥–∞–Ω–∞, –Ω–æ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ | ‚ùå | ‚úÖ |
| –ó–∞–≤–µ—Ä—à–µ–Ω–∞ | 7 | –ó–∞–∫–æ–Ω—á–∏–ª—Å—è –±—é–¥–∂–µ—Ç/—Å—Ä–æ–∫ | ‚ùå | ‚úÖ |
| –û—Ç–∫–ª–æ–Ω–µ–Ω–∞ | 8 | –ù–µ –ø—Ä–æ—à–ª–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é | ‚ùå | ‚úÖ |
| –ê–∫—Ç–∏–≤–Ω–∞ | 9 | –ò–¥—ë—Ç –ø–æ–∫–∞–∑ | ‚úÖ | ‚úÖ |
| –ù–∞ –ø–∞—É–∑–µ | 11 | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é | ‚ùå | ‚úÖ |

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –ë—ã–ª–æ (–∏—Å–∫–∞–ª–∏ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ):
```typescript
body: JSON.stringify([])  // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ = —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ (—Å—Ç–∞—Ç—É—Å 9)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üì¢ –ö–∞–º–ø–∞–Ω–∏–∏: 0
üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: 0
```

### –°—Ç–∞–ª–æ (–∏—â–µ–º –≤—Å–µ):
```typescript
const statuses = [4, 7, 8, 9, 11];
for (const status of statuses) {
  body: JSON.stringify([status])  // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π —Å—Ç–∞—Ç—É—Å
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üîé –ù–∞–π–¥–µ–Ω–æ –∫–∞–º–ø–∞–Ω–∏–π –≤—Å–µ–≥–æ: 5
üì¢ –ö–∞–º–ø–∞–Ω–∏–∏: 2 (–≤–∫–ª—é—á–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—é)
üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã: 15
üí° –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã –∫–∞–∫ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```

## –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

### –í–∞—à —Å–ª—É—á–∞–π:
- –£ –≤–∞—Å –±—ã–ª–∞ –∫–∞–º–ø–∞–Ω–∏—è, –Ω–æ **–∑–∞–∫–æ–Ω—á–∏–ª—Å—è –±—é–¥–∂–µ—Ç** ‚Üí —Å—Ç–∞—Ç—É—Å 7 (–∑–∞–≤–µ—Ä—à–µ–Ω–∞)
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ –∏—Å–∫–∞–ª —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å 9 (–∞–∫—Ç–∏–≤–Ω—ã–µ) ‚Üí –Ω–µ –Ω–∞—à—ë–ª
- –ù–æ–≤—ã–π –∫–æ–¥ –∏—â–µ—Ç —Å—Ç–∞—Ç—É—Å 7 ‚Üí **–Ω–∞–π–¥—ë—Ç!**

### –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π:
–î–∞–∂–µ –µ—Å–ª–∏ –∫–∞–º–ø–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –µ—ë –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ **–≤—Å—ë –µ—â—ë –∞–∫—Ç—É–∞–ª—å–Ω—ã**:
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ –∫–∞–∫–∏–º –∑–∞–ø—Ä–æ—Å–∞–º –±—ã–ª —Ç—Ä–∞—Ñ–∏–∫
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü–æ–º–æ–≥–∞—é—Ç –ø–æ–Ω—è—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å—ã –∞—É–¥–∏—Ç–æ—Ä–∏–∏

## –õ–æ–≥–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ù–∞–π–¥–µ–Ω—ã –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏:
```
üîé –ù–∞–π–¥–µ–Ω–æ –∫–∞–º–ø–∞–Ω–∏–π –≤—Å–µ–≥–æ: 3
   - –°—Ç–∞—Ç—É—Å 7 (–∑–∞–≤–µ—Ä—à–µ–Ω–∞): 2 –∫–∞–º–ø–∞–Ω–∏–∏
   - –°—Ç–∞—Ç—É—Å 9 (–∞–∫—Ç–∏–≤–Ω–∞): 1 –∫–∞–º–ø–∞–Ω–∏—è
üì¢ –ö–∞–º–ø–∞–Ω–∏–∏: 2 (–≤–∫–ª—é—á–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—é)
üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã: 12
üí° –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã –∫–∞–∫ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (NO JAM fallback)
```

### –ü–æ–ª—É—á–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:
```json
{
  "keywords": [
    {
      "keyword": "–ø–ª–∞—Ç—å–µ –¥–ª—è —É–º—Ä—ã",
      "orders": 5,
      "views": 150,
      "clicks": 20,
      "ctr": 13.3,
      "source": "advert",
      "campaignStatus": 7  // –ó–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è –∫–∞–º–ø–∞–Ω–∏—è
    },
    {
      "keyword": "—Ö–∏–º–∞—Ä —Å –ø–ª–∞—Ç—å–µ–º",
      "orders": 3,
      "views": 100,
      "clicks": 15,
      "ctr": 15.0,
      "source": "advert",
      "campaignStatus": 7
    }
  ]
}
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–ï—Å–ª–∏ –æ–¥–∏–Ω —Å—Ç–∞—Ç—É—Å –Ω–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å –¥—Ä—É–≥–∏–º–∏:
```typescript
for (const status of statuses) {
  try {
    // –ó–∞–ø—Ä–æ—Å –∫–∞–º–ø–∞–Ω–∏–π
  } catch (err) {
    // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–∞–∂–µ –µ—Å–ª–∏ –æ–¥–∏–Ω —Å—Ç–∞—Ç—É—Å —É–ø–∞–ª
  }
}
```

### 2. –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
–ö–∞–º–ø–∞–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–∞—Ç—É—Å–∞—Ö (—Ä–µ–¥–∫–æ), —É–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏:
```typescript
const uniqueCampaigns = Array.from(
  new Map(allCampaigns.map(c => [c.advertId, c])).values()
);
```

### 3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–æ–≤–∞—Ä—É
–ò—â–µ–º –∫–∞–º–ø–∞–Ω–∏–∏ –≥–¥–µ:
- –ï—Å—Ç—å –Ω–∞—à —Ç–æ–≤–∞—Ä –≤ —Å–ø–∏—Å–∫–µ `nms`
- –ò–õ–ò –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `subjectId`

```typescript
const relevantCampaigns = allCampaigns.filter((c: any) => {
  const nms = c.autoParams?.nms || [];
  const hasOurProduct = nms.includes(nmId);
  const subjectMatch = subjectId && c.autoParams?.subject?.id === subjectId;
  return hasOurProduct || subjectMatch;
});
```

## API WB: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π

### –≠–Ω–¥–ø–æ–∏–Ω—Ç
```
POST https://advert-api.wildberries.ru/adv/v1/promotion/adverts
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
```typescript
// –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
body: JSON.stringify([])

// –ö–∞–º–ø–∞–Ω–∏–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
body: JSON.stringify([9])  // –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ

// –ù–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å–æ–≤
body: JSON.stringify([9, 11])  // –ê–∫—Ç–∏–≤–Ω—ã–µ + –Ω–∞ –ø–∞—É–∑–µ
```

### –û—Ç–≤–µ—Ç
```json
[
  {
    "advertId": 12345,
    "name": "–ö–∞–º–ø–∞–Ω–∏—è –¥–ª—è –ø–ª–∞—Ç—å—è",
    "status": 7,
    "autoParams": {
      "nms": [493805274, 356956444],
      "subject": {
        "id": 69,
        "name": "–ü–ª–∞—Ç—å—è"
      }
    }
  }
]
```

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

1. ‚úÖ **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è
2. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç** –Ω–∞ `/test-ai-optimization`
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** ‚Äî –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   ```
   üîé –ù–∞–π–¥–µ–Ω–æ –∫–∞–º–ø–∞–Ω–∏–π –≤—Å–µ–≥–æ: N
   üì¢ –ö–∞–º–ø–∞–Ω–∏–∏: M (–≤–∫–ª—é—á–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—é)
   üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ä–µ–∫–ª–∞–º—ã: K
   ```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ë—ã–ª–æ:
```json
{
  "campaigns": {
    "total": 0,
    "stats": []
  },
  "keywords": {
    "total": 0,
    "keywords": []
  }
}
```

### –°—Ç–∞–Ω–µ—Ç:
```json
{
  "campaigns": {
    "total": 2,
    "stats": [
      {
        "advertId": 12345,
        "name": "–ü–ª–∞—Ç—å–µ –¥–ª—è —É–º—Ä—ã",
        "status": 7,
        "views": 5000,
        "clicks": 250,
        "orders": 15
      }
    ]
  },
  "keywords": {
    "total": 12,
    "keywords": [
      {
        "keyword": "–ø–ª–∞—Ç—å–µ –¥–ª—è —É–º—Ä—ã",
        "orders": 5,
        "views": 150
      }
    ]
  }
}
```

## –ü–æ—á–µ–º—É —Ä–∞–Ω—å—à–µ –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª–æ

### –í–∞—à–∞ —Å–∏—Ç—É–∞—Ü–∏—è:
1. –°–æ–∑–¥–∞–ª–∏ –∫–∞–º–ø–∞–Ω–∏—é –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 493805274
2. –ö–∞–º–ø–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–ª–∞, —Å–æ–±–∏—Ä–∞–ª–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
3. –ó–∞–∫–æ–Ω—á–∏–ª—Å—è –±—é–¥–∂–µ—Ç ‚Üí —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è —Å 9 –Ω–∞ 7
4. –°—Ç–∞—Ä—ã–π –∫–æ–¥ –∏—Å–∫–∞–ª —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å 9 ‚Üí –Ω–µ –Ω–∞—à—ë–ª
5. –†–µ–∑—É–ª—å—Ç–∞—Ç: "0 –∫–∞–º–ø–∞–Ω–∏–π, 0 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤"

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ö–æ–¥ –∏—â–µ—Ç —Å—Ç–∞—Ç—É—Å—ã [4, 7, 8, 9, 11]
2. –ù–∞—Ö–æ–¥–∏—Ç –≤–∞—à—É –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é (—Å—Ç–∞—Ç—É—Å 7)
3. –ü–æ–ª—É—á–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —ç—Ç–æ–π –∫–∞–º–ø–∞–Ω–∏–∏
4. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö –∫–∞–∫ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
5. –†–µ–∑—É–ª—å—Ç–∞—Ç: "2 –∫–∞–º–ø–∞–Ω–∏–∏, 12 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤" ‚úÖ

## –†–µ–∑—é–º–µ

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ü–æ–∏—Å–∫ –∫–∞–º–ø–∞–Ω–∏–π —Å–æ –≤—Å–µ–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
‚úÖ **–ù–∞–π–¥—ë—Ç:** –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ, –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ, –≥–æ—Ç–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
‚úÖ **–ü–æ–ª—É—á–∏—Ç:** –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:** –ö–∞–∫ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥—ë—Ç –≤–∞—à—É –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é –∏ –ø–æ–ª—É—á–∏—Ç –∏–∑ –Ω–µ—ë –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞!** üéâ
