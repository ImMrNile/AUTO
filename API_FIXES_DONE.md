# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: API –∑–∞–ø—Ä–æ—Å—ã –∫ WB

## üîç –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏

### ‚ùå –û—à–∏–±–∫–∞ 400 - Bad Request
```
üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã - WB API error: 400
üìä –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ - WB API error: 400
üõí –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ - WB API error: 400
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å `begin/end` –≤–º–µ—Å—Ç–æ `start/end`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å `nmIDs` –≤–º–µ—Å—Ç–æ `nmIds`

### ‚ùå –û—à–∏–±–∫–∞ 405 - Method Not Allowed
```
üì¢ –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ - WB API error: 405
üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ - WB API error: 405
```

**–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ —Ç–æ–∫–µ–Ω –±–µ–∑ –ø—Ä–∞–≤ Promotion, –Ω–æ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã endpoints

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã ‚úÖ

**–ë—ã–ª–æ:**
```typescript
body: JSON.stringify({
  currentPeriod: {
    begin: startDate,  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
    end: endDate
  },
  nmIDs: [nmId]  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
})
```

**–°—Ç–∞–ª–æ:**
```typescript
body: JSON.stringify({
  currentPeriod: {
    start: startDate,  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
    end: endDate
  },
  nmIds: [nmId]  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
})
```

**Endpoint:** `POST /api/v2/search-report/product/search-texts`

---

### 2. –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ ‚úÖ

**–ë—ã–ª–æ:**
```typescript
body: JSON.stringify({
  period: {
    begin: startDate,  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
    end: endDate
  },
  nmIDs: [nmId]  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
})
```

**–°—Ç–∞–ª–æ:**
```typescript
body: JSON.stringify({
  period: {
    start: startDate,  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
    end: endDate
  },
  nmIds: [nmId]  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
})
```

**Endpoint:** `POST /api/analytics/v3/sales-funnel/products`

---

### 3. –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ ‚úÖ

**–ë—ã–ª–æ:**
```typescript
body: JSON.stringify({
  period: {
    begin: startDate,  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
    end: endDate
  },
  nmIDs: [nmId]  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
})
```

**–°—Ç–∞–ª–æ:**
```typescript
body: JSON.stringify({
  period: {
    start: startDate,  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
    end: endDate
  },
  nmIds: [nmId]  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
})
```

**Endpoint:** `POST /api/analytics/v3/sales-funnel/products/history`

---

### 4. –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ ‚úÖ

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:**
```typescript
const campaignIds = relevantCampaigns.map(c => c.advertId).join(',');
const from = startDate.toISOString().split('T')[0];
const to = endDate.toISOString().split('T')[0];

const url = `https://advert-api.wildberries.ru/adv/v3/fullstats?id=${campaignIds}&from=${from}&to=${to}`;
```

**Endpoint:** `GET /adv/v3/fullstats`

---

### 5. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ‚úÖ

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:**
```typescript
const from = startDate.toISOString().split('T')[0];
const to = endDate.toISOString().split('T')[0];

body: JSON.stringify({
  id: campaign.advertId,
  dates: {
    from: from,
    to: to
  }
})
```

**Endpoint:** `POST /adv/v0/normquery/stats`

---

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `src/app/api/products/[id]/optimization-data/route.ts`

### –ò–∑–º–µ–Ω–µ–Ω–æ:
1. ‚úÖ `begin` ‚Üí `start` –≤–æ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
2. ‚úÖ `nmIDs` ‚Üí `nmIds` –≤–æ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
3. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –¥–∞—Ç
4. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:
```
http://localhost:3000/test-ai-optimization
```

### –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä:
–ù–∞–ø—Ä–∏–º–µ—Ä: **"–ú–æ–ª–æ—á–Ω–æ–µ –º—É—Å—É–ª—å–º–∞–Ω—Å–∫–æ–µ –ø–ª–∞—Ç—å–µ"** (nmID: 493805274)

### –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
‚úÖ üìä –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
‚úÖ üì¢ –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
‚úÖ üõí –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
‚úÖ üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
```

---

## ‚ö†Ô∏è –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ —Ç–æ–∫–µ–Ω–∞:

1. **Analytics API** - –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ–Ω–≤–µ—Ä—Å–∏–∏, –≤–æ—Ä–æ–Ω–∫–∏
2. **Promotion API** - –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π –∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

### –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏:
```
‚òëÔ∏è Content
‚òëÔ∏è Analytics  ‚Üê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
‚òëÔ∏è Promotion  ‚Üê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
‚òëÔ∏è Statistics
‚òëÔ∏è Marketplace
```

### –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω:
```
http://localhost:3000/cabinets ‚Üí BASEE ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
```

---

## üìä –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WB API

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–¥–µ–ª–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

- **Analytics:** https://dev.wildberries.ru/en/openapi/analytics
- **Promotion:** https://dev.wildberries.ru/en/openapi/promotion

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ API:
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–∏–æ–¥–∞: `start/end` –≤–º–µ—Å—Ç–æ `begin/end`
- –ú–∞—Å—Å–∏–≤—ã nmID: `nmIds` –≤–º–µ—Å—Ç–æ `nmIDs` (camelCase)
- –î–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `YYYY-MM-DD`

---

## ‚úÖ –ò—Ç–æ–≥

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –§–æ—Ä–º–∞—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ 5 API endpoints
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–æ–¥ –∑–∞–ø—Ä–æ—Å–æ–≤

### –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- ‚úÖ –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∞–≤–∞)
- ‚úÖ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∞–≤–∞)

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:
```bash
npm run dev
```

–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ:
```
http://localhost:3000/test-ai-optimization
```

**–í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ WB!** üéâ
