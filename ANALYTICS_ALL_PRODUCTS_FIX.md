# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ "–ü—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤" –≤ –ê–Ω–∞–ª–∏—Ç–∏–∫–µ

## –ü—Ä–æ–±–ª–µ–º–∞
–í —Ä–∞–∑–¥–µ–ª–µ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" ‚Üí "–ü—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤" –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ **—Ç–æ–ø-10 —Ç–æ–≤–∞—Ä–æ–≤**, –∞ –Ω–µ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ü–æ–∫–∞–∑ –í–°–ï–• —Ç–æ–≤–∞—Ä–æ–≤ (–Ω–µ —Ç–æ–ª—å–∫–æ —Ç–æ–ø-10)

**–ë—ã–ª–æ:**
```typescript
const productsForDisplay = productSearchQuery 
  ? (data.sales?.allProducts || [])
  : (data.sales?.topProducts || []); // ‚ùå –¢–æ–ª—å–∫–æ —Ç–æ–ø-10 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

**–°—Ç–∞–ª–æ:**
```typescript
const productsForDisplay = data.sales?.allProducts || []; // ‚úÖ –í–°–ï —Ç–æ–≤–∞—Ä—ã –≤—Å–µ–≥–¥–∞
```

### 2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Ç–æ–≤–∞—Ä–æ–≤

**–ò—Å—Ç–æ—á–Ω–∏–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:**
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –§–æ—Ç–æ –∏–∑ –ë–î (`dbData?.image`)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL –∏–∑ WB API (`generateWBImageUrl(nmID)`)
- Fallback: Placeholder –µ—Å–ª–∏ —Ñ–æ—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏:**
```typescript
onLoad={() => {
  clientLogger.log(`‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${product.nmID}`);
}}
onError={(e) => {
  clientLogger.log(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${product.nmID}:`, imageUrl);
  e.currentTarget.src = 'https://via.placeholder.com/80x80/f3f4f6/9ca3af?text=–ù–µ—Ç+—Ñ–æ—Ç–æ';
}}
```

### 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –º–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

**–†–∞–∑–º–µ—Ä—ã —Ñ–æ—Ç–æ:**
- –ú–æ–±–∏–ª—å–Ω—ã–µ: `w-12 h-12` (48x48px)
- –î–µ—Å–∫—Ç–æ–ø: `w-20 h-20` (80x80px)

**–û—Ç—Å—Ç—É–ø—ã –∏ —à—Ä–∏—Ñ—Ç—ã:**
- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞: `p-2 md:p-4` (–º–µ–Ω—å—à–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)
- –ù–∞–∑–≤–∞–Ω–∏–µ: `text-xs md:text-base` (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä)
- –ê—Ä—Ç–∏–∫—É–ª: `text-[10px] md:text-xs` (–æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)
- –¶–µ–Ω–∞: `text-sm md:text-lg` (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä)
- –ó–∞–∫–∞–∑—ã: `text-[10px] md:text-sm` (–º–∞–ª–µ–Ω—å–∫–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)

**–°–∫—Ä–æ–ª–ª:**
- –ú–æ–±–∏–ª—å–Ω—ã–µ: `max-h-[500px]` (–º–µ–Ω—å—à–µ –≤—ã—Å–æ—Ç–∞)
- –î–µ—Å–∫—Ç–æ–ø: `max-h-[600px]` (–±–æ–ª—å—à–µ –≤—ã—Å–æ—Ç–∞)

### 4. –°—á–µ—Ç—á–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

**–ë–µ–∑ –ø–æ–∏—Å–∫–∞:**
```
–ü—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤ (42 —Ç–æ–≤–∞—Ä–∞)
```

**–° –ø–æ–∏—Å–∫–æ–º:**
```
–ü—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤ | –ù–∞–π–¥–µ–Ω–æ: 5
```

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `src/app/components/analytics/AnalyticsDashboard.tsx`:
  - –°—Ç—Ä–æ–∫–∏ 1066-1151: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
  - –°—Ç—Ä–æ–∫–∏ 1039-1060: –û–±–Ω–æ–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å —Å—á–µ—Ç—á–∏–∫–æ–º

## Backend - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –ü—Ä–æ–±–ª–µ–º–∞
URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
return `https://images.wbstatic.net/big/new/${Math.floor(nmID / 10000)}0000/${nmID}-1.jpg`;
```

### –†–µ—à–µ–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç WB CDN:
```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (—Ä–∞–±–æ—Ç–∞–µ—Ç)
function generateWBImageUrl(nmID: number): string {
  const vol = Math.floor(nmID / 100000);
  const part = Math.floor(nmID / 1000);
  const basketNum = (vol % 10) + 1;
  
  return `https://basket-${String(basketNum).padStart(2, '0')}.wbbasket.ru/vol${vol}/part${part}/${nmID}/images/big/1.webp`;
}
```

**–§–æ—Ä–º–∞—Ç URL:** `https://basket-{01-10}.wbbasket.ru/vol{vol}/part{part}/{nmID}/images/big/1.webp`

**–ü—Ä–∏–º–µ—Ä:**
- nmID: `433549628`
- vol: `4335` (433549628 / 100000)
- part: `433549` (433549628 / 1000)
- basketNum: `06` ((4335 % 10) + 1)
- URL: `https://basket-06.wbbasket.ru/vol4335/part433549/433549628/images/big/1.webp`

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã
- `src/app/api/analytics/dashboard/route.ts` - —Ñ—É–Ω–∫—Ü–∏—è `generateWBImageUrl()` (—Å—Ç—Ä–æ–∫–∞ 1684)

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è **–í–°–ï —Ç–æ–≤–∞—Ä—ã** —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏ (–Ω–µ —Ç–æ–ª—å–∫–æ —Ç–æ–ø-10)
‚úÖ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏ —É–ª—É—á—à–µ–Ω–∞
‚úÖ –°—á–µ—Ç—á–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ "–ü—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –í–°–ï —Ç–æ–≤–∞—Ä—ã (–Ω–µ —Ç–æ–ª—å–∫–æ 10)
   - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
   - –°—á–µ—Ç—á–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
   - –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∏–¥–Ω—ã –∏ –Ω–µ –æ–±—Ä–µ–∑–∞–Ω—ã

## –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

```
üìä –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: 42
üñºÔ∏è –ü–µ—Ä–≤—ã–µ 2 —Ç–æ–≤–∞—Ä–∞: [{ nmID: 123, title: "...", image: "..." }, ...]
‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 123
‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 456
```

–ï—Å–ª–∏ —Ñ–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:
```
‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 789: https://basket-01.wbbasket.ru/...
```
