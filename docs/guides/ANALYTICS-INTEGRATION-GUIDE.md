# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

## ‚úÖ –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ **—É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã** –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

## üìä –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **AnalyticsDashboard** (`src/app/components/AnalyticsDashboard.tsx`)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `totalOtherDeductions` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –±–ª–æ–∫ "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤ WB"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –±–ª–æ–∫ "–†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏ (—Å—Ö–µ–º–∞ WB)"
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```tsx
import AnalyticsDashboard from './components/AnalyticsDashboard';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
<AnalyticsDashboard />
```

**–û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ë–∞–∑–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞ (finishedPrice)
- –í—ã—á–µ—Ç—ã WB: –∫–æ–º–∏—Å—Å–∏—è, –ª–æ–≥–∏—Å—Ç–∏–∫–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø—Ä–∏–µ–º–∫–∞, –ø—Ä–æ—á–∏–µ
- –ö –ø–µ—Ä–µ–≤–æ–¥—É (forPay)
- –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å
- –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å
- –ú–∞—Ä–∂–∞

---

### 2. **Dashboard API** (`src/app/api/analytics/dashboard/route.ts`)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- ‚úÖ –í—ã—Ä—É—á–∫–∞ = `finishedPrice` (–±–∞–∑–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞)
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—Å–µ—Ö –≤—ã—á–µ—Ç–æ–≤ WB
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `totalOtherDeductions`
- ‚úÖ –§–æ—Ä–º—É–ª–∞: `forPay = finishedPrice - –≤—Å–µ –≤—ã—á–µ—Ç—ã`

**Endpoint:**
```
GET /api/analytics/dashboard?days=30&forceRefresh=false
```

**–û—Ç–≤–µ—Ç:**
```typescript
{
  success: true,
  data: {
    financial: {
      totalRevenue: number,      // finishedPrice - –±–∞–∑–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
      totalProfit: number,        // forPay - —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å
      profitMargin: number,       // % –æ—Ç –±–∞–∑—ã
      expenses: {
        totalWbCommission: number,
        totalLogistics: number,
        totalStorage: number,
        totalAcceptance: number,
        totalOtherDeductions: number,  // ‚Üê –ù–û–í–û–ï –ü–û–õ–ï
        totalWbExpenses: number,
        totalCost: number,
        totalTaxes: number,
        totalAdvertising: number
      }
    },
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  }
}
```

---

### 3. **ProductFinancialDetails** (`src/app/components/ProductFinancialDetails.tsx`)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```tsx
import ProductFinancialDetails from './components/ProductFinancialDetails';

// –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ç–æ–≤–∞—Ä
<ProductFinancialDetails 
  nmId={product.nmID}
  onClose={() => setSelectedProduct(null)}
/>
```

---

### 4. **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä** (`lib/services/wbFinancialCalculator.ts`)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∫–∏–¥–∫–∏ WB (SPP)
- ‚úÖ –ü–æ–ª—è `priceWithWbDiscount`, `customerPrice`, `wbDiscount`
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { WbFinancialCalculator } from '@/lib/services/wbFinancialCalculator';

const calculation = WbFinancialCalculator.calculate(
  {
    nmId: 123456,
    vendorCode: 'ABC-123',
    category: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞',
    priceWithDiscount: 1145,        // finishedPrice
    originalPrice: 1500,
    priceWithWbDiscount: 1547,      // priceWithDisc (—Å —É—á–µ—Ç–æ–º SPP)
    deliveryType: 'FBW',
    isReturned: false,
    orderDate: new Date(),
    costPrice: 500
  },
  {
    commissionFbw: 15,
    commissionFbs: 12,
    commissionDbs: 10,
    commissionCc: 8,
    commissionEdbs: 18
  },
  {
    taxRate: 6,
    advertisingPercent: 3,
    storageDays: 30
  }
);

console.log(calculation.profit.amount);  // –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å
console.log(calculation.wbDiscount);     // –°–∫–∏–¥–∫–∞ WB (SPP)
```

---

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`src/app/page.tsx`)

–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞":

```tsx
// –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ page.tsx
{activeTab === 'analytics' && (
  <div className="fade-in">
    <AnalyticsDashboard />
  </div>
)}
```

### –ù–∞–≤–∏–≥–∞—Ü–∏—è

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏:
- **–°–æ–∑–¥–∞—Ç—å** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
- **–¢–æ–≤–∞—Ä—ã** - —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Üê –ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **–ê–∫–∫–∞—É–Ω—Ç** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üìà –ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

### –ë–ª–æ–∫ "–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏"

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞    ‚îÇ –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å          ‚îÇ
‚îÇ 100,000 ‚ÇΩ        ‚îÇ 32,000 ‚ÇΩ                ‚îÇ
‚îÇ +15.5% ‚Üë         ‚îÇ +22.3% ‚Üë                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ó–∞–∫–∞–∑—ã           ‚îÇ –°—Ä–µ–¥–Ω–∏–π —á–µ–∫             ‚îÇ
‚îÇ 150              ‚îÇ 667 ‚ÇΩ                   ‚îÇ
‚îÇ +10.2% ‚Üë         ‚îÇ +15.5% ‚Üë                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ë–ª–æ–∫ "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤ WB"

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –í—ã—á–µ—Ç—ã –∏–∑ –±–∞–∑—ã –ø—Ä–æ–¥–∞–≤—Ü–∞ (finishedPrice)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ö–æ–º–∏—Å—Å–∏—è WB      ‚îÇ 15,000 ‚ÇΩ (15%)         ‚îÇ
‚îÇ –õ–æ–≥–∏—Å—Ç–∏–∫–∞        ‚îÇ 10,000 ‚ÇΩ (10%)         ‚îÇ
‚îÇ –•—Ä–∞–Ω–µ–Ω–∏–µ         ‚îÇ 2,000 ‚ÇΩ (2%)           ‚îÇ
‚îÇ –ü—Ä–∏—ë–º–∫–∞          ‚îÇ 500 ‚ÇΩ (0.5%)           ‚îÇ
‚îÇ –ü—Ä–æ—á–∏–µ –≤—ã—á–µ—Ç—ã    ‚îÇ 500 ‚ÇΩ                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –í—Å–µ–≥–æ –≤—ã—á–µ—Ç–æ–≤ WB ‚îÇ 28,000 ‚ÇΩ (28%)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ë–ª–æ–∫ "–†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏ (—Å—Ö–µ–º–∞ WB)"

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ë–∞–∑–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞    ‚îÇ 100,000 ‚ÇΩ              ‚îÇ
‚îÇ - –í—ã—á–µ—Ç—ã WB      ‚îÇ -28,000 ‚ÇΩ              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ = –ö –ø–µ—Ä–µ–≤–æ–¥—É     ‚îÇ 72,000 ‚ÇΩ               ‚îÇ
‚îÇ - –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å  ‚îÇ -40,000 ‚ÇΩ              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ = –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å ‚îÇ 32,000 ‚ÇΩ               ‚îÇ
‚îÇ üí° –ú–∞—Ä–∂–∞: 32%                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏:
- –°–µ–≥–æ–¥–Ω—è (1 –¥–µ–Ω—å)
- –ù–µ–¥–µ–ª—è (7 –¥–Ω–µ–π)
- 30 –¥–Ω–µ–π
- 90 –¥–Ω–µ–π
- –ì–æ–¥ (365 –¥–Ω–µ–π)

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å" –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ WB API:
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä forceRefresh=true
const response = await fetch('/api/analytics/dashboard?days=30&forceRefresh=true');
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ **6 —á–∞—Å–æ–≤**. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –≤ —Ç–µ—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫—ç—à–∞.

---

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—É:

### –¶–≤–µ—Ç–∞
- **–§–∏–æ–ª–µ—Ç–æ–≤—ã–π** (`purple-600`) - —Ä–∞—Å—Ö–æ–¥—ã WB
- **–ó–µ–ª–µ–Ω—ã–π** (`green-700`) - –ø—Ä–∏–±—ã–ª—å
- **–°–∏–Ω–∏–π** (`blue-700`) - –∫ –ø–µ—Ä–µ–≤–æ–¥—É
- **–ö—Ä–∞—Å–Ω—ã–π** (`red-600`) - –≤—ã—á–µ—Ç—ã

### –≠—Ñ—Ñ–µ–∫—Ç—ã
- `liquid-glass` - —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
- `fade-in` - –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
- `hover:scale-105` - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:

```
üìä –ó–∞–ø—Ä–æ—Å –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞
üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞: days=30, forceRefresh=false
‚úÖ –†–∞–±–æ—Ç–∞–µ–º —Å –∫–∞–±–∏–Ω–µ—Ç–æ–º: –ú–æ–π –∫–∞–±–∏–Ω–µ—Ç
üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞: –±–∞–∑–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞ 100000‚ÇΩ...
üìä –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø—Ä–æ–¥–∞–∂: 150, –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î: 0
üí∞ –†–ï–ê–õ–¨–ù–´–ï —Ä–∞—Å—Ö–æ–¥—ã WB (–≤—ã—á–∏—Ç–∞—é—Ç—Å—è –∏–∑ finishedPrice): {...}
üí∞ –ò–¢–û–ì–û —Ñ–∏–Ω–∞–Ω—Å—ã (–†–ï–ê–õ–¨–ù–ê–Ø —Å—Ö–µ–º–∞ WB): {...}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–§–æ—Ä–º—É–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏:
```typescript
finishedPrice - –∫–æ–º–∏—Å—Å–∏—è - –ª–æ–≥–∏—Å—Ç–∏–∫–∞ - —Ö—Ä–∞–Ω–µ–Ω–∏–µ - –ø—Ä–∏–µ–º–∫–∞ - –ø—Ä–æ—á–µ–µ ‚âà forPay
```

–ï—Å–ª–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ > 5%, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ö–æ–º–∏—Å—Å–∏–∏ –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `Subcategory`)
2. –î–∞–Ω–Ω—ã–µ –∏–∑ WB API (–ø–æ–ª—è `forPay`, `finishedPrice`)
3. –õ–æ–≥–∏ —Ä–∞—Å—á–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/WB-FINANCIAL-CALCULATIONS.md` - —Ñ–æ—Ä–º—É–ª—ã –∏ –ø—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–æ–≤
- `docs/ANALYTICS-UPDATE-SUMMARY.md` - —Å–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `docs/PRODUCT-ANALYTICS-API.md` - API –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–∞

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `src/app/components/AnalyticsDashboard.tsx` - –≥–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
- `src/app/components/ProductFinancialDetails.tsx` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–∞
- `src/app/api/analytics/dashboard/route.ts` - API endpoint

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] Dashboard API –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç AnalyticsDashboard –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã TypeScript —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- [x] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å **—Ä–µ–∞–ª—å–Ω—ã–µ** —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ –∏–ª–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
