# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WB Analytics API –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **Wildberries Seller Analytics API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏. –¢–µ–ø–µ—Ä—å –¥–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤–º–µ—Å—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤.

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
–î–∞–Ω–Ω—ã–µ –æ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –ø—Ä–∏–º–µ—Ä–Ω–æ:
- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã = –ó–∞–∫–∞–∑—ã √ó 50
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É = –ó–∞–∫–∞–∑—ã √ó 5
- CTR, –∫–æ–Ω–≤–µ—Ä—Å–∏—è - –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏–∑ **WB nm-report API**:
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (`openCardCount`)
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É (`addToCartCount`)
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –∑–∞–∫–∞–∑—ã (`ordersCount`)
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏/–≤—ã–∫—É–ø—ã (`buyoutsCount`)
- ‚úÖ –¢–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–π –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –≤–æ—Ä–æ–Ω–∫–∏

## –ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å: WbConversionService

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
`lib/services/wbConversionService.ts`

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### 1. `checkAnalyticsAccess()`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ WB Analytics API.

```typescript
const service = new WbConversionService(apiToken);
const { hasAccess, error } = await service.checkAnalyticsAccess();
```

#### 2. `getProductConversion(nmId, dateFrom, dateTo)`
–ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.

```typescript
const conversion = await service.getProductConversion(
  12345678,
  new Date('2024-01-01'),
  new Date('2024-01-31')
);

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
{
  nmId: 12345678,
  views: 15420,              // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã
  addToCart: 1542,           // –í –∫–æ—Ä–∑–∏–Ω—É
  orders: 308,               // –ó–∞–∫–∞–∑—ã
  sales: 262,                // –ü—Ä–æ–¥–∞–∂–∏
  ctr: 10.0,                 // CTR (%)
  addToCartRate: 10.0,       // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É (%)
  cartToOrderRate: 20.0,     // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã –≤ –∑–∞–∫–∞–∑ (%)
  orderToSaleRate: 85.0,     // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏–∑ –∑–∞–∫–∞–∑–∞ –≤ –ø—Ä–æ–¥–∞–∂—É (%)
  overallConversion: 1.7     // –û–±—â–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è (%)
}
```

#### 3. `getDashboardConversion(nmIds, dateFrom, dateTo)`
–ü–æ–ª—É—á–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º.

```typescript
const conversion = await service.getDashboardConversion(
  [12345678, 87654321, ...],
  new Date('2024-01-01'),
  new Date('2024-01-31')
);

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
{
  totalViews: 154200,
  totalAddToCart: 15420,
  totalOrders: 3080,
  totalSales: 2618,
  avgCTR: 10.0,
  addToCartRate: 10.0,
  purchaseRate: 20.0,
  cartAbandonmentRate: 80.0
}
```

#### 4. `getConversionWithFallback(nmIds, dateFrom, dateTo, ordersCount)`
–£–º–Ω—ã–π –º–µ—Ç–æ–¥ —Å fallback: –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã.

```typescript
const conversion = await service.getConversionWithFallback(
  [12345678, 87654321],
  new Date('2024-01-01'),
  new Date('2024-01-31'),
  3080  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è fallback —Ä–∞—Å—á–µ—Ç–æ–≤
);
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Dashboard API

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `/api/analytics/dashboard`

1. **–ò–º–ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞**
```typescript
import { WbConversionService } from '../../../../../lib/services/wbConversionService';
```

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
```typescript
// –°–æ–∑–¥–∞–µ–º —Å–µ—Ä–≤–∏—Å
const conversionService = new WbConversionService(apiToken);

// –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
const uniqueNmIds = Array.from(new Set(salesData.map(sale => sale.nmId).filter(Boolean)));

// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å fallback
const conversionData = await conversionService.getConversionWithFallback(
  uniqueNmIds,
  startDate,
  endDate,
  totalOrders
);
```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
```typescript
const totalViews = conversionData.totalViews;
const addToCart = conversionData.totalAddToCart;
const addToCartRate = conversionData.addToCartRate;
const purchaseRate = conversionData.purchaseRate;
const avgCTR = conversionData.avgCTR;
const cartAbandonmentRate = conversionData.cartAbandonmentRate;
```

## WB Analytics API Endpoint

### nm-report/detail

**URL:** `https://seller-analytics-api.wildberries.ru/api/v2/nm-report/detail`

**–ú–µ—Ç–æ–¥:** POST

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Authorization: <WB_API_TOKEN>
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "nmIDs": [12345678, 87654321],
  "period": {
    "begin": "2024-01-01",
    "end": "2024-01-31"
  },
  "timezone": "Europe/Moscow",
  "aggregationLevel": "day"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "data": [
    {
      "nmID": 12345678,
      "vendorCode": "ART-001",
      "brandName": "MyBrand",
      "statistics": {
        "selectedPeriod": {
          "begin": "2024-01-01",
          "end": "2024-01-31",
          "openCardCount": 15420,      // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã
          "addToCartCount": 1542,      // –í –∫–æ—Ä–∑–∏–Ω—É
          "ordersCount": 308,          // –ó–∞–∫–∞–∑—ã
          "ordersSumRub": 123200,      // –°—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤
          "buyoutsCount": 262,         // –í—ã–∫—É–ø—ã (–ø—Ä–æ–¥–∞–∂–∏)
          "buyoutsSumRub": 104800,     // –°—É–º–º–∞ –≤—ã–∫—É–ø–æ–≤
          "cancelCount": 46,           // –û—Ç–º–µ–Ω—ã
          "avgPriceRub": 400,          // –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞
          "avgOrdersCountPerDay": 10   // –°—Ä–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã –≤ –¥–µ–Ω—å
        }
      }
    }
  ]
}
```

## –í–æ—Ä–æ–Ω–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

–°–µ—Ä–≤–∏—Å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –≤–æ—Ä–æ–Ω–∫—É –ø—Ä–æ–¥–∞–∂:

```
–ü—Ä–æ—Å–º–æ—Ç—Ä—ã (100%)
    ‚Üì CTR / addToCartRate
–î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É (10%)
    ‚Üì cartToOrderRate
–ó–∞–∫–∞–∑—ã (20% –æ—Ç –∫–æ—Ä–∑–∏–Ω—ã = 2% –æ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤)
    ‚Üì orderToSaleRate
–ü—Ä–æ–¥–∞–∂–∏ (85% –æ—Ç –∑–∞–∫–∞–∑–æ–≤ = 1.7% –æ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤)
```

### –ú–µ—Ç—Ä–∏–∫–∏:
- **CTR (Click-Through Rate)** = (–î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É / –ü—Ä–æ—Å–º–æ—Ç—Ä—ã) √ó 100%
- **Add to Cart Rate** = (–î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É / –ü—Ä–æ—Å–º–æ—Ç—Ä—ã) √ó 100%
- **Cart to Order Rate** = (–ó–∞–∫–∞–∑—ã / –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É) √ó 100%
- **Order to Sale Rate** = (–ü—Ä–æ–¥–∞–∂–∏ / –ó–∞–∫–∞–∑—ã) √ó 100%
- **Overall Conversion** = (–ü—Ä–æ–¥–∞–∂–∏ / –ü—Ä–æ—Å–º–æ—Ç—Ä—ã) √ó 100%
- **Cart Abandonment Rate** = ((–î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É - –ó–∞–∫–∞–∑—ã) / –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É) √ó 100%

## Fallback –º–µ—Ö–∞–Ω–∏–∑–º

–ï—Å–ª–∏ Analytics API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ —É —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:
1. –°–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `checkAnalyticsAccess()`
2. –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã:
   - –ü—Ä–æ—Å–º–æ—Ç—Ä—ã = –ó–∞–∫–∞–∑—ã √ó 50
   - –í –∫–æ—Ä–∑–∏–Ω—É = –ó–∞–∫–∞–∑—ã √ó 5
   - –ü—Ä–æ–¥–∞–∂–∏ = –ó–∞–∫–∞–∑—ã √ó 0.85
3. –õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å

## –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤

–î–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ (>100) —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –±–∞—Ç—á–∏:
- –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞: 100 —Ç–æ–≤–∞—Ä–æ–≤
- –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏: 500ms
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ WB API

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–æ–∫–µ–Ω—É

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å Analytics API —Ç–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:
- ‚úÖ –ë–∏—Ç 1 (Analytics access) –≤ –ø–æ–ª–µ `s` (permissions)
- ‚úÖ –ù–µ –∏—Å—Ç–µ–∫—à–∏–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (`exp`)

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:
```typescript
const payload = JSON.parse(atob(token.split('.')[1]));
const hasAnalyticsAccess = (payload.s & (1 << 1)) !== 0;
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –ø–æ–¥—Ä–æ–±–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
- üìä –ó–∞–ø—Ä–æ—Å—ã –∫ API
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ fallback
- ‚ùå –û—à–∏–±–∫–∏ API

–ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:
```
üìä –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –¥–ª—è 45 —Ç–æ–≤–∞—Ä–æ–≤...
üåê –ó–∞–ø—Ä–æ—Å nm-report –¥–ª—è 45 —Ç–æ–≤–∞—Ä–æ–≤ —Å 2024-01-01 –ø–æ 2024-01-31
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ –¥–∞–Ω–Ω—ã—Ö –ø–æ 45 —Ç–æ–≤–∞—Ä–∞–º
‚úÖ –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è: {
  –ø—Ä–æ—Å–º–æ—Ç—Ä—ã: 154200,
  –≤–ö–æ—Ä–∑–∏–Ω—É: 15420,
  –∑–∞–∫–∞–∑—ã: 3080,
  –ø—Ä–æ–¥–∞–∂–∏: 2618,
  CTR: '10.00%',
  –∫–æ–Ω–≤–µ—Ä—Å–∏—è–í–ö–æ—Ä–∑–∏–Ω—É: '10.00%',
  –∫–æ–Ω–≤–µ—Ä—Å–∏—è–í–ó–∞–∫–∞–∑: '20.00%'
}
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: 1-3 —Å–µ–∫—É–Ω–¥—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤)
- –ë–∞—Ç—á–∏–Ω–≥: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–ª—è >100 —Ç–æ–≤–∞—Ä–æ–≤
- Rate limiting: —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ dashboard API (6 —á–∞—Å–æ–≤)

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ React

```typescript
// –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ API –¥–∞—à–±–æ—Ä–¥–∞
const { data } = useAnalyticsCache<DashboardData>(fetchAnalytics);

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
<div>
  <div>–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {data.conversion.totalViews.toLocaleString()}</div>
  <div>CTR: {data.conversion.avgCTR.toFixed(2)}%</div>
  <div>–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É: {data.conversion.addToCartRate.toFixed(2)}%</div>
  <div>–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–∫—É–ø–∫—É: {data.conversion.purchaseRate.toFixed(2)}%</div>
</div>
```

### –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞

```typescript
import { WbConversionService } from '@/lib/services/wbConversionService';

const service = new WbConversionService(apiToken);

// –î–ª—è –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
const productConversion = await service.getProductConversion(
  12345678,
  new Date('2024-01-01'),
  new Date('2024-01-31')
);

console.log(`–ö–æ–Ω–≤–µ—Ä—Å–∏—è —Ç–æ–≤–∞—Ä–∞: ${productConversion.overallConversion.toFixed(2)}%`);

// –î–ª—è –¥–∞—à–±–æ—Ä–¥–∞
const dashboardConversion = await service.getDashboardConversion(
  [12345678, 87654321],
  new Date('2024-01-01'),
  new Date('2024-01-31')
);

console.log(`–í—Å–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: ${dashboardConversion.totalViews}`);
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–µ—Ä–≤–∏—Å gracefully –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏:
- ‚ùå 401/403 - –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Analytics API ‚Üí fallback
- ‚ùå 500 - –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ WB ‚Üí fallback
- ‚ùå Timeout - –ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è ‚Üí fallback
- ‚ùå Network error - –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é ‚Üí fallback

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É –¥–∞—à–±–æ—Ä–¥–∞.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ —Ç–æ–∫–µ–Ω–∞:
```typescript
const service = new WbConversionService(apiToken);
const { hasAccess, error } = await service.checkAnalyticsAccess();
console.log('Analytics API –¥–æ—Å—Ç—É–ø–µ–Ω:', hasAccess);
```

2. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞:
```typescript
const conversion = await service.getProductConversion(
  testNmId,
  new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),
  new Date()
);
console.log('–ö–æ–Ω–≤–µ—Ä—Å–∏—è:', conversion);
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ fallback:
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω
const service = new WbConversionService('invalid_token');
const conversion = await service.getConversionWithFallback([], new Date(), new Date(), 100);
// –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WB Analytics API –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- ‚úÖ Graceful fallback –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ Wildberries.
