# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é —Ç–æ–≤–∞—Ä–æ–≤

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ WB Automation —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ —É –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ —É–∫–∞–∑–∞–Ω–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å. –û–¥–Ω–∞–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–∏–±—ã–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### –ë–µ–∑ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏

–ï—Å–ª–∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- ‚úÖ **–ü—Ä–æ–¥–∞–∂–∏** - –æ–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ (finishedPrice)
- ‚úÖ **–†–∞—Å—Ö–æ–¥—ã WB** - –∫–æ–º–∏—Å—Å–∏—è, –ª–æ–≥–∏—Å—Ç–∏–∫–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø—Ä–∏—ë–º–∫–∞
- ‚úÖ **–ö –ø–µ—Ä–µ–≤–æ–¥—É** - —Å—É–º–º–∞ –ø–æ—Å–ª–µ –≤—ã—á–µ—Ç–∞ –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ WB
- ‚ö†Ô∏è **–ü—Ä–∏–±—ã–ª—å** - –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ "–Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"

### –° —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é

–ï—Å–ª–∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —É–∫–∞–∑–∞–Ω–∞, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- ‚úÖ **–ü—Ä–æ–¥–∞–∂–∏** - –æ–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ (finishedPrice)
- ‚úÖ **–†–∞—Å—Ö–æ–¥—ã WB** - –∫–æ–º–∏—Å—Å–∏—è, –ª–æ–≥–∏—Å—Ç–∏–∫–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø—Ä–∏—ë–º–∫–∞
- ‚úÖ **–ö –ø–µ—Ä–µ–≤–æ–¥—É** - —Å—É–º–º–∞ –ø–æ—Å–ª–µ –≤—ã—á–µ—Ç–∞ –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ WB
- ‚úÖ **–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å** - —Å—É–º–º–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ **–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å** - —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏

## –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞

```
–ü—Ä–æ–¥–∞–∂–∏ (finishedPrice)
- –ö–æ–º–∏—Å—Å–∏—è WB
- –õ–æ–≥–∏—Å—Ç–∏–∫–∞ (–¥–æ –∫–ª–∏–µ–Ω—Ç–∞ + –≤–æ–∑–≤—Ä–∞—Ç—ã)
- –•—Ä–∞–Ω–µ–Ω–∏–µ
- –ü—Ä–∏—ë–º–∫–∞
- –ü—Ä–æ—á–∏–µ –≤—ã—á–µ—Ç—ã WB
= –ö –ø–µ—Ä–µ–≤–æ–¥—É (forPay)
- –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)
= –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å
```

## –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### –í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞

```
üì¶ –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: 52 –∏–∑ 77 —Ç–æ–≤–∞—Ä–æ–≤ (67.5%) —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é, –∏—Ç–æ–≥–æ 137425.00‚ÇΩ
‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –£ 25 —Ç–æ–≤–∞—Ä–æ–≤ (32.5%) –Ω–µ —É–∫–∞–∑–∞–Ω–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å. 
   –£–∫–∞–∂–∏—Ç–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–±—ã–ª–∏.

üí∞ –ò–¢–û–ì–û (–∫–∞–∫ –≤ WB –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏): {
  –ø—Ä–æ–¥–∞–∂–∏: '+146582.00‚ÇΩ',
  –∫–æ–º–∏—Å—Å–∏—èWB: '-2258.00‚ÇΩ',
  –ª–æ–≥–∏—Å—Ç–∏–∫–∞: '-18903.00‚ÇΩ',
  —Ö—Ä–∞–Ω–µ–Ω–∏–µ: '-52.00‚ÇΩ',
  –ø—Ä–∏–µ–º–∫–∞: '-0.00‚ÇΩ',
  –∫–ü–µ—Ä–µ–≤–æ–¥—É: '97468.00‚ÇΩ',
  —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: '-137425.00‚ÇΩ (52/77 —Ç–æ–≤–∞—Ä–æ–≤)',
  –ü–†–ò–ë–´–õ–¨: '-39957.00‚ÇΩ (–Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)',
  –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: '‚ö†Ô∏è 25 —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏'
}
```

### –í API –æ—Ç–≤–µ—Ç–µ

```json
{
  "financial": {
    "totalRevenue": 146582,
    "totalForPay": 97468,
    "totalProfit": -39957,
    "expenses": {
      "totalCost": 137425
    },
    "costInfo": {
      "totalProducts": 77,
      "productsWithCost": 52,
      "productsWithoutCost": 25,
      "coveragePercent": 67.5,
      "hasMissingCost": true,
      "warning": "–£–∫–∞–∂–∏—Ç–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è 25 —Ç–æ–≤–∞—Ä–æ–≤, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–∏–±—ã–ª–∏"
    }
  }
}
```

### –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (–±—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:

```tsx
{data.financial.costInfo.hasMissingCost && (
  <div className="bg-yellow-50 border-2 border-yellow-400 rounded-xl p-4">
    <div className="flex items-start gap-3">
      <AlertTriangle className="w-5 h-5 text-yellow-600 mt-0.5" />
      <div>
        <h4 className="font-semibold text-yellow-900">
          –ù–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏
        </h4>
        <p className="text-sm text-yellow-800 mt-1">
          {data.financial.costInfo.warning}
        </p>
        <p className="text-xs text-yellow-700 mt-2">
          –ü–æ–∫—Ä—ã—Ç–∏–µ: {data.financial.costInfo.productsWithCost} –∏–∑{' '}
          {data.financial.costInfo.totalProducts} —Ç–æ–≤–∞—Ä–æ–≤ (
          {data.financial.costInfo.coveragePercent}%)
        </p>
        <button className="mt-3 text-sm text-yellow-900 underline">
          –£–∫–∞–∑–∞—Ç—å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å ‚Üí
        </button>
      </div>
    </div>
  </div>
)}
```

## –ö–∞–∫ —É–∫–∞–∑–∞—Ç—å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å

### 1. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞

–í —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ (Step 4 Results):

```tsx
<input
  type="number"
  placeholder="–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (‚ÇΩ)"
  value={costPrice}
  onChange={(e) => setCostPrice(e.target.value)}
  className="w-full px-4 py-3 rounded-xl border-2 border-gray-300"
/>
```

### 2. –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞

#### –ß–µ—Ä–µ–∑ API:

```typescript
// PUT /api/products/{productId}
await fetch(`/api/products/${productId}`, {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    costPrice: 1500 // –≤ —Ä—É–±–ª—è—Ö
  })
});
```

#### –ß–µ—Ä–µ–∑ –ë–î –Ω–∞–ø—Ä—è–º—É—é:

```sql
UPDATE products 
SET "costPrice" = 1500 
WHERE id = 'product-id';
```

### 3. –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤:

```typescript
// –ü—Ä–∏–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
const updates = [
  { id: 'product-1', costPrice: 1500 },
  { id: 'product-2', costPrice: 2000 },
  { id: 'product-3', costPrice: 1200 }
];

for (const update of updates) {
  await prisma.product.update({
    where: { id: update.id },
    data: { costPrice: update.costPrice }
  });
}
```

## –°—Ö–µ–º–∞ –ë–î

```prisma
model Product {
  id          String   @id @default(cuid())
  name        String
  price       Float
  costPrice   Float?   // –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ç–æ—á–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

1. **–£–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —Å—Ä–∞–∑—É** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
2. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–∫—É–ø–æ—á–Ω–æ–π —Ü–µ–Ω—ã
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** - —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ 100% —Ç–æ–≤–∞—Ä–æ–≤ —Å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é

### –î–ª—è –æ—Ü–µ–Ω–æ—á–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

–ï—Å–ª–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –∑–Ω–∞—Ç—å —Ç–æ—á–Ω—É—é –ø—Ä–∏–±—ã–ª—å:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–ö –ø–µ—Ä–µ–≤–æ–¥—É" –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å
- –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–∑–∂–µ
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –ë–ï–ó —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏

- ‚úÖ –ü—Ä–æ–¥–∞–∂–∏ (totalRevenue)
- ‚úÖ –ö –ø–µ—Ä–µ–≤–æ–¥—É (totalForPay)
- ‚úÖ –†–∞—Å—Ö–æ–¥—ã WB (totalWbExpenses)
- ‚úÖ –ö–æ–º–∏—Å—Å–∏—è WB
- ‚úÖ –õ–æ–≥–∏—Å—Ç–∏–∫–∞
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–∏—ë–º–∫–∞
- ‚úÖ –ú–∞—Ä–∂–∞ WB (–¥–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏)

### –ú–µ—Ç—Ä–∏–∫–∏ –° —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é

- ‚úÖ –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –≤—ã—à–µ
- ‚úÖ –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å (totalProfit)
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ (profitMargin)
- ‚úÖ ROI (–≤–æ–∑–≤—Ä–∞—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π)
- ‚úÖ –¢–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –í—Å–µ —Ç–æ–≤–∞—Ä—ã —Å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é

```
–ü—Ä–æ–¥–∞–∂–∏: 146,582‚ÇΩ
–†–∞—Å—Ö–æ–¥—ã WB: 49,114‚ÇΩ
–ö –ø–µ—Ä–µ–≤–æ–¥—É: 97,468‚ÇΩ
–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: 80,000‚ÇΩ (77/77 —Ç–æ–≤–∞—Ä–æ–≤ = 100%)
–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å: 17,468‚ÇΩ ‚úÖ
```

### –ü—Ä–∏–º–µ—Ä 2: –ß–∞—Å—Ç–∏—á–Ω–∞—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å

```
–ü—Ä–æ–¥–∞–∂–∏: 146,582‚ÇΩ
–†–∞—Å—Ö–æ–¥—ã WB: 49,114‚ÇΩ
–ö –ø–µ—Ä–µ–≤–æ–¥—É: 97,468‚ÇΩ
–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: 137,425‚ÇΩ (52/77 —Ç–æ–≤–∞—Ä–æ–≤ = 67.5%)
–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å: -39,957‚ÇΩ (–Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) ‚ö†Ô∏è

–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –£ 25 —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å
```

### –ü—Ä–∏–º–µ—Ä 3: –ë–µ–∑ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏

```
–ü—Ä–æ–¥–∞–∂–∏: 146,582‚ÇΩ
–†–∞—Å—Ö–æ–¥—ã WB: 49,114‚ÇΩ
–ö –ø–µ—Ä–µ–≤–æ–¥—É: 97,468‚ÇΩ ‚úÖ
–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: 0‚ÇΩ (0/77 —Ç–æ–≤–∞—Ä–æ–≤ = 0%)
–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å: 97,468‚ÇΩ (–±–µ–∑ —É—á–µ—Ç–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏) ‚ö†Ô∏è

–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –£–∫–∞–∂–∏—Ç–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–±—ã–ª–∏
```

## FAQ

### –ü–æ—á–µ–º—É –ø—Ä–∏–±—ã–ª—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è?

–ï—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –∏ –µ—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–π —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É–∫–∞–∑–∞–Ω–∞ –ª–∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —É –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
2. –í–æ–∑–º–æ–∂–Ω–æ, —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —É–∫–∞–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ —É –¥–æ—Ä–æ–≥–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
3. –£–∫–∞–∂–∏—Ç–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞

### –ú–æ–∂–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏?

–î–∞, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å "–ö –ø–µ—Ä–µ–≤–æ–¥—É" –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π.

### –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ–≤–∞—Ä—ã –±–µ–∑ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏?

```typescript
const hasCost = product.costPrice && product.costPrice > 0;
```

–¢–æ–≤–∞—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è –±–µ–∑ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –µ—Å–ª–∏:
- `costPrice === null`
- `costPrice === undefined`
- `costPrice === 0`

### –í–ª–∏—è–µ—Ç –ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –º–µ—Ç—Ä–∏–∫–∏?

–ù–µ—Ç, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–ø—Ä–æ–¥–∞–∂–∏, —Ä–∞—Å—Ö–æ–¥—ã WB, –∫ –ø–µ—Ä–µ–≤–æ–¥—É) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–ª–∏—á–∏—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª—ã

- `src/app/api/analytics/dashboard/route.ts` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞
- `prisma/schema.prisma` - —Å—Ö–µ–º–∞ –ë–î —Å –ø–æ–ª–µ–º costPrice
- `src/app/components/ProductForm/Step4Results.tsx` - —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏

### –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞

```typescript
// –ü–æ–¥—Å—á–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ —Å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é
let totalCost = 0;
let costFromDb = 0;

salesData.forEach((sale) => {
  const product = productMap.get(String(sale.nmId));
  if (product?.costPrice && product.costPrice > 0) {
    totalCost += product.costPrice;
    costFromDb++;
  }
});

// –†–∞—Å—á–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è
const totalProductsInSales = salesData.length;
const costCoveragePercent = (costFromDb / totalProductsInSales) * 100;
const missingCostCount = totalProductsInSales - costFromDb;
const hasMissingCost = missingCostCount > 0;

// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
if (hasMissingCost) {
  console.warn(`‚ö†Ô∏è –£ ${missingCostCount} —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å`);
}

// –†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏
const totalProfit = totalForPay - totalCost;
const profitStatus = hasMissingCost 
  ? `${totalProfit.toFixed(2)}‚ÇΩ (–Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)` 
  : `${totalProfit.toFixed(2)}‚ÇΩ`;
```
