# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ AI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏—è–º–∏

## üìä –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         VERCEL CRON JOB                             ‚îÇ
‚îÇ                    –ö–∞–∂–¥—ã–µ 3 —á–∞—Å–∞ (00:00, 03:00, ...)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              GET /api/cron/check-campaigns                          ‚îÇ
‚îÇ  1. –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ (aiEnabled = true)             ‚îÇ
‚îÇ  2. –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç autoCheckCampaign()              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   autoCheckCampaign(campaignId)                     ‚îÇ
‚îÇ  1. –ü–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ:                                        ‚îÇ
‚îÇ     - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–∏ (–ø–æ–∫–∞–∑—ã, –∫–ª–∏–∫–∏, –∑–∞–∫–∞–∑—ã, ROI)            ‚îÇ
‚îÇ     - –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–ø–æ–∑–∏—Ü–∏–∏, —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å)                    ‚îÇ
‚îÇ     - –ö–æ–Ω–≤–µ—Ä—Å–∏—è (CTR, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É)                       ‚îÇ
‚îÇ  2. –í—ã–∑—ã–≤–∞–µ—Ç askCampaignAdvice()                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                askCampaignAdvice(campaignId, data)                  ‚îÇ
‚îÇ  1. –ü–æ–ª—É—á–∞–µ—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç Thread –¥–ª—è –∫–∞–º–ø–∞–Ω–∏–∏                      ‚îÇ
‚îÇ  2. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ                                ‚îÇ
‚îÇ  3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ OpenAI Assistants API                            ‚îÇ
‚îÇ  4. –ñ–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞ AI                                                 ‚îÇ
‚îÇ  5. –ü–∞—Ä—Å–∏—Ç JSON –æ—Ç–≤–µ—Ç                                              ‚îÇ
‚îÇ  6. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –≤ –ë–î                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      OPENAI ASSISTANTS API                          ‚îÇ
‚îÇ  Thread: thread_abc123 (–ü–ê–ú–Ø–¢–¨ –ö–ê–ú–ü–ê–ù–ò–ò)                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ Message 1 (User):                                         ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: 50 –ø–æ–∫–∞–∑–æ–≤, 2 –∫–ª–∏–∫–∞, 0 –∑–∞–∫–∞–∑–æ–≤"            ‚îÇ    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îÇ
‚îÇ  ‚îÇ Message 2 (Assistant):                                    ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ {"diagnosis": "CTR 4% - –Ω–∏–∑–∫–æ", "actions": [...]}       ‚îÇ    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îÇ
‚îÇ  ‚îÇ Message 3 (User):                                         ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: 80 –ø–æ–∫–∞–∑–æ–≤, 8 –∫–ª–∏–∫–æ–≤, 1 –∑–∞–∫–∞–∑"             ‚îÇ    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îÇ
‚îÇ  ‚îÇ Message 4 (Assistant):                                    ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ {"diagnosis": "CTR 10% - –æ—Ç–ª–∏—á–Ω–æ!", "actions": [...]}   ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  AI –≤–∏–¥–∏—Ç –í–°–Æ –∏—Å—Ç–æ—Ä–∏—é –∏ –º–æ–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É!             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     –ë–ê–ó–ê –î–ê–ù–ù–´–• (PostgreSQL)                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ Campaign                                                 ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - id: 27673276                                          ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - aiThreadId: "thread_abc123"                           ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - aiEnabled: true                                       ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - lastAiCheckAt: 2025-11-09 15:00:00                   ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ CampaignDecision (–∏—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π)                      ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - id: 1                                                 ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - campaignId: 27673276                                  ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - diagnosis: "CTR 4% - –Ω–∏–∑–∫–æ"                           ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - actions: [{"type": "CHANGE_BID", ...}]                ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - createdAt: 2025-11-09 15:00:00                        ‚îÇ       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îÇ
‚îÇ  ‚îÇ - id: 2                                                 ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - campaignId: 27673276                                  ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - diagnosis: "CTR 10% - –æ—Ç–ª–∏—á–Ω–æ!"                       ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - actions: []                                            ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - createdAt: 2025-11-09 18:00:00                        ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ CampaignActionLog (–ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)                      ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - id: 1                                                 ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - campaignId: 27673276                                  ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - actionType: "CHANGE_BID"                              ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - status: "success"                                     ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - result: {"oldBid": 100, "newBid": 120}               ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - executedAt: 2025-11-09 15:00:15                       ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞)

```
Vercel Cron
    ‚îÇ
    ‚îú‚îÄ> GET /api/cron/check-campaigns
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îú‚îÄ> –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞–º–ø–∞–Ω–∏–∏ (aiEnabled = true)
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ> –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞–º–ø–∞–Ω–∏–∏:
    ‚îÇ               ‚îÇ
    ‚îÇ               ‚îú‚îÄ> –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É WB API
    ‚îÇ               ‚îú‚îÄ> –ü–æ–ª—É—á–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    ‚îÇ               ‚îú‚îÄ> –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é
    ‚îÇ               ‚îÇ
    ‚îÇ               ‚îú‚îÄ> askCampaignAdvice()
    ‚îÇ               ‚îÇ       ‚îÇ
    ‚îÇ               ‚îÇ       ‚îú‚îÄ> getCampaignThread() ‚Üí thread_abc123
    ‚îÇ               ‚îÇ       ‚îú‚îÄ> –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    ‚îÇ               ‚îÇ       ‚îú‚îÄ> OpenAI API ‚Üí AI –∞–Ω–∞–ª–∏–∑
    ‚îÇ               ‚îÇ       ‚îú‚îÄ> –ü–∞—Ä—Å–∏—Ç—å JSON –æ—Ç–≤–µ—Ç
    ‚îÇ               ‚îÇ       ‚îî‚îÄ> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ CampaignDecision
    ‚îÇ               ‚îÇ
    ‚îÇ               ‚îî‚îÄ> –ï—Å–ª–∏ –µ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:
    ‚îÇ                       ‚îî‚îÄ> executeAction() ‚Üí WB API
    ‚îÇ
    ‚îî‚îÄ> –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```

### 2. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```
User Request
    ‚îÇ
    ‚îú‚îÄ> POST /api/campaigns/[id]/auto-check
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ> autoCheckCampaign(campaignId)
    ‚îÇ               ‚îÇ
    ‚îÇ               ‚îî‚îÄ> (—Ç–æ—Ç –∂–µ –ø—Ä–æ—Ü–µ—Å—Å, —á—Ç–æ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è)
    ‚îÇ
    ‚îî‚îÄ> –í–µ—Ä–Ω—É—Ç—å advice
```

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏

```
User Request
    ‚îÇ
    ‚îú‚îÄ> GET /api/campaigns/[id]/auto-check
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îú‚îÄ> getCampaignHistory(campaignId)
    ‚îÇ       ‚îÇ       ‚îÇ
    ‚îÇ       ‚îÇ       ‚îú‚îÄ> –ü–æ–ª—É—á–∏—Ç—å aiThreadId –∏–∑ –ë–î
    ‚îÇ       ‚îÇ       ‚îî‚îÄ> OpenAI API ‚Üí –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ> –í–µ—Ä–Ω—É—Ç—å –∏—Å—Ç–æ—Ä–∏—é
    ‚îÇ
    ‚îî‚îÄ> –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Campaign (—Ç–∞–±–ª–∏—Ü–∞ –∫–∞–º–ø–∞–Ω–∏–π)

```typescript
{
  id: 27673276,
  wbCampaignId: 27673276,
  name: "–ê–≤—Ç–æ—Ä–µ–∫–ª–∞–º–∞ - –ü–ª–∞—Ç—å–µ —Å —Ö–∏–º–∞—Ä–æ–º",
  status: "active",
  
  // AI –ø–æ–ª—è
  aiThreadId: "thread_abc123",      // ID Thread –≤ OpenAI
  aiEnabled: true,                   // –í–∫–ª—é—á–µ–Ω–æ –ª–∏ AI —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  lastAiCheckAt: "2025-11-09T15:00:00Z",
  
  productId: 1,
  createdAt: "2025-11-09T12:00:00Z",
  updatedAt: "2025-11-09T15:00:00Z"
}
```

### CampaignDecision (—Ä–µ—à–µ–Ω–∏—è AI)

```typescript
{
  id: 1,
  campaignId: 27673276,
  diagnosis: "CTR 4% - –Ω–∏–∂–µ –Ω–æ—Ä–º—ã (—Ü–µ–ª—å >8%). –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—Ç–∞–≤–∫–∏.",
  actions: [
    {
      type: "CHANGE_BID",
      priority: "critical",
      autoExecutable: true,
      reason: "CTR 4% –ø—Ä–∏ –Ω–æ—Ä–º–µ 8%. –°—Ç–∞–≤–∫–∞ 100‚ÇΩ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è.",
      expectedEffect: "CTR –≤—ã—Ä–∞—Å—Ç–µ—Ç –¥–æ 6-8% —á–µ—Ä–µ–∑ 3 —á–∞—Å–∞",
      details: {
        campaignId: 27673276,
        api: "PATCH /adv/v0/bids",
        keywords: [
          { keyword: "–Ω–∞–º–∞–∑–Ω–∏–∫", bid: 120, oldBid: 100 }
        ]
      }
    }
  ],
  forecast: {
    sales: "+20% —á–µ—Ä–µ–∑ 6 —á–∞—Å–æ–≤",
    conversion: "+2% —á–µ—Ä–µ–∑ 12 —á–∞—Å–æ–≤",
    roi: "200-250%",
    confidence: "high"
  },
  executed: true,
  executedAt: "2025-11-09T15:00:15Z",
  createdAt: "2025-11-09T15:00:00Z"
}
```

### CampaignActionLog (–ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)

```typescript
{
  id: 1,
  campaignId: 27673276,
  decisionId: 1,
  actionType: "CHANGE_BID",
  actionDetails: {
    keyword: "–Ω–∞–º–∞–∑–Ω–∏–∫",
    oldBid: 100,
    newBid: 120
  },
  status: "success",  // pending, success, failed
  result: {
    wbResponse: { success: true },
    actualBid: 120
  },
  error: null,
  createdAt: "2025-11-09T15:00:00Z",
  executedAt: "2025-11-09T15:00:15Z"
}
```

---

## üß† OpenAI Thread (–ø–∞–º—è—Ç—å AI)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Thread

```
Thread ID: thread_abc123
Metadata: { campaignId: "27673276", createdAt: "2025-11-09T12:00:00Z" }

Messages:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [1] User (2025-11-09 12:00:00)                            ‚îÇ
‚îÇ –°–æ–∑–¥–∞–π –∫–∞–º–ø–∞–Ω–∏—é –¥–ª—è —Ç–æ–≤–∞—Ä–∞ "–ü–ª–∞—Ç—å–µ —Å —Ö–∏–º–∞—Ä–æ–º"            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [2] Assistant (2025-11-09 12:00:15)                       ‚îÇ
‚îÇ {                                                          ‚îÇ
‚îÇ   "diagnosis": "–¢–æ–≤–∞—Ä –Ω–æ–≤—ã–π, –æ—Ä–≥–∞–Ω–∏–∫–∏ –Ω–µ—Ç...",           ‚îÇ
‚îÇ   "actions": [                                             ‚îÇ
‚îÇ     {                                                      ‚îÇ
‚îÇ       "type": "CREATE_CAMPAIGN",                          ‚îÇ
‚îÇ       "details": { ... }                                   ‚îÇ
‚îÇ     }                                                      ‚îÇ
‚îÇ   ]                                                        ‚îÇ
‚îÇ }                                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [3] User (2025-11-09 15:00:00)                            ‚îÇ
‚îÇ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–∏:                                   ‚îÇ
‚îÇ {                                                          ‚îÇ
‚îÇ   "views": 50,                                             ‚îÇ
‚îÇ   "clicks": 2,                                             ‚îÇ
‚îÇ   "orders": 0,                                             ‚îÇ
‚îÇ   "ctr": 4.0,                                              ‚îÇ
‚îÇ   "cpc": 90                                                ‚îÇ
‚îÇ }                                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [4] Assistant (2025-11-09 15:00:12)                       ‚îÇ
‚îÇ {                                                          ‚îÇ
‚îÇ   "diagnosis": "CTR 4% - –Ω–∏–∑–∫–æ (—Ü–µ–ª—å >8%)...",           ‚îÇ
‚îÇ   "actions": [                                             ‚îÇ
‚îÇ     {                                                      ‚îÇ
‚îÇ       "type": "CHANGE_BID",                               ‚îÇ
‚îÇ       "details": { "newBid": 120 }                        ‚îÇ
‚îÇ     }                                                      ‚îÇ
‚îÇ   ]                                                        ‚îÇ
‚îÇ }                                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [5] User (2025-11-09 18:00:00)                            ‚îÇ
‚îÇ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–∏:                                   ‚îÇ
‚îÇ {                                                          ‚îÇ
‚îÇ   "views": 80,                                             ‚îÇ
‚îÇ   "clicks": 8,                                             ‚îÇ
‚îÇ   "orders": 1,                                             ‚îÇ
‚îÇ   "ctr": 10.0,                                             ‚îÇ
‚îÇ   "cpc": 110                                               ‚îÇ
‚îÇ }                                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [6] Assistant (2025-11-09 18:00:10)                       ‚îÇ
‚îÇ {                                                          ‚îÇ
‚îÇ   "diagnosis": "CTR –≤—ã—Ä–æ—Å —Å 4% –¥–æ 10% –ø–æ—Å–ª–µ —É–≤–µ–ª–∏—á–µ–Ω–∏—è    ‚îÇ
‚îÇ                 —Å—Ç–∞–≤–∫–∏ - –æ—Ç–ª–∏—á–Ω–æ! –û—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å.",   ‚îÇ
‚îÇ   "actions": []                                            ‚îÇ
‚îÇ }                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤–æ–µ:** –í —Å–æ–æ–±—â–µ–Ω–∏–∏ [6] AI **–ø–æ–º–Ω–∏—Ç**, —á—Ç–æ –≤ [4] –æ–Ω —É–≤–µ–ª–∏—á–∏–ª —Å—Ç–∞–≤–∫—É, –∏ –≤–∏–¥–∏—Ç, —á—Ç–æ —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ!

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ó–∞—â–∏—Ç–∞ Cron endpoint

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
const authHeader = request.headers.get('authorization');
if (authHeader !== `Bearer ${process.env.CRON_SECRET}`) {
  return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
}
```

### 2. –ò–∑–æ–ª—è—Ü–∏—è Thread

- –ö–∞–∂–¥–∞—è –∫–∞–º–ø–∞–Ω–∏—è –∏–º–µ–µ—Ç —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π Thread ID
- Thread ID —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –∏ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–∞–º–ø–∞–Ω–∏–∏
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —á—É–∂–æ–º—É Thread

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

- –í—Å–µ —Ä–µ—à–µ–Ω–∏—è AI —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `CampaignDecision`
- –í—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `CampaignActionLog`
- –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫—Ç–æ, –∫–æ–≥–¥–∞ –∏ —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- ‚úÖ –î–æ 100 –∫–∞–º–ø–∞–Ω–∏–π: —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
- ‚úÖ –î–æ 500 –∫–∞–º–ø–∞–Ω–∏–π: –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (5-6 —á–∞—Å–æ–≤)
- ‚ö†Ô∏è –ë–æ–ª–µ–µ 500 –∫–∞–º–ø–∞–Ω–∏–π: –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è >500 –∫–∞–º–ø–∞–Ω–∏–π

1. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–Ω–∞—á–∞–ª–∞ –∫–∞–º–ø–∞–Ω–∏–∏ —Å –≤—ã—Å–æ–∫–∏–º ROI
   - –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–∞–º–ø–∞–Ω–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π >24 —á–∞—Å–∞

2. **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º Vercel Edge Functions
   - –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–º–ø–∞–Ω–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ö—ç—à–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É WB API (5-10 –º–∏–Ω—É—Ç)
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

4. **–ë–∞—Ç—á–∏–Ω–≥:**
   - –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∫–∞–º–ø–∞–Ω–∏–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º
   - –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∫ AI –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ö–æ–∂–∏—Ö –∫–∞–º–ø–∞–Ω–∏–π

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

‚úÖ **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è –ø–∞–º—è—Ç—å** - AI –ø–æ–º–Ω–∏—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —É—á–∞—Å—Ç–∏—è —á–µ–ª–æ–≤–µ–∫–∞  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–∞–º–ø–∞–Ω–∏—è–º–∏  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π  

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Telegram/Email) –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö
2. –î–æ–±–∞–≤–∏—Ç—å –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ—à–µ–Ω–∏–π AI
3. –î–æ–±–∞–≤–∏—Ç—å A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π AI
4. –î–æ–±–∞–≤–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ AI –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
