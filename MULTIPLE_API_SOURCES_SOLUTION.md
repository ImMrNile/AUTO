# üîÑ –†–µ—à–µ–Ω–∏–µ: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö WB API

## –ü—Ä–æ–±–ª–µ–º–∞

**–í–∞—à —Å–ª—É—á–∞–π:**
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±—ã–ª–∞ –≤ **–∞–≤–≥—É—Å—Ç–µ 2024**
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞—Ç—ã (2024-08-06 - 2024-08-12)
- –ù–æ WB API **–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ** –∑–∞ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥

**–ü–æ—á–µ–º—É?**
WB API –∏–º–µ–µ—Ç **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≥–ª—É–±–∏–Ω—É –∏—Å—Ç–æ—Ä–∏–∏**:
- `sales-funnel/products` - –º–∞–∫—Å–∏–º—É–º 90 –¥–Ω–µ–π
- `search-report` - –º–∞–∫—Å–∏–º—É–º 90 –¥–Ω–µ–π
- `sales-funnel/history` - –º–∞–∫—Å–∏–º—É–º 7 –¥–Ω–µ–π –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏

**–ê–≤–≥—É—Å—Ç 2024 ‚Üí –ù–æ—è–±—Ä—å 2024 = ~90 –¥–Ω–µ–π** - –Ω–∞ –≥—Ä–∞–Ω–∏ –ª–∏–º–∏—Ç–∞!

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### 1. –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ (analytics API)
```typescript
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ç–æ–¥
POST https://seller-analytics-api.wildberries.ru/api/analytics/v3/sales-funnel/products
```
**–•—Ä–∞–Ω–∏—Ç:** 90 –¥–Ω–µ–π  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–∂–µ—Ç –Ω–µ –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –∞–≤–≥—É—Å—Ç

### 2. –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç (nm-report)
```typescript
// –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ #1
POST https://seller-analytics-api.wildberries.ru/api/v2/nm-report/detail
Body: {
  "nmIDs": [580082172],
  "period": {
    "begin": "2024-08-06",
    "end": "2024-08-12"
  },
  "timezone": "Europe/Moscow",
  "aggregationLevel": "day"
}
```
**–•—Ä–∞–Ω–∏—Ç:** –î–æ 120 –¥–Ω–µ–π  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –ü—Ä–æ—Å–º–æ—Ç—Ä—ã, –∑–∞–∫–∞–∑—ã, –∫–æ—Ä–∑–∏–Ω–∞ –ø–æ –¥–Ω—è–º

### 3. Statistics API (–ü–û–õ–ù–ê–Ø –ò–°–¢–û–†–ò–Ø!)
```typescript
// –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ #2 - –ì–õ–ê–í–ù–´–ô!
GET https://statistics-api.wildberries.ru/api/v1/supplier/sales?dateFrom=2024-08-06&flag=0
```
**–•—Ä–∞–Ω–∏—Ç:** **–í–°–Æ –ò–°–¢–û–†–ò–Æ** —Å –º–æ–º–µ–Ω—Ç–∞ –ø–µ—Ä–≤–æ–π –ø—Ä–æ–¥–∞–∂–∏!  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –í—Å–µ –∑–∞–∫–∞–∑—ã —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

### –î–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–∏ –¥–µ–ª–∞–µ—Ç 3 –∑–∞–ø—Ä–æ—Å–∞:

**1. –ü—ã—Ç–∞–µ—Ç—Å—è analytics API:**
```
üìä –ö–æ–Ω–≤–µ—Ä—Å–∏—è: –∑–∞–∫–∞–∑–æ–≤ 0
```

**2. –ü—ã—Ç–∞–µ—Ç—Å—è nm-report:**
```
üìà –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ø—Ä–æ—Å–º–æ—Ç—Ä—ã=0, –∑–∞–∫–∞–∑—ã=0
```

**3. –ü—ã—Ç–∞–µ—Ç—Å—è statistics API (–ì–õ–ê–í–ù–´–ô!):**
```
üí∞ –ü—Ä–æ–¥–∞–∂–∏ (statistics): –∑–∞–∫–∞–∑–æ–≤=3, —Å—É–º–º–∞=15000‚ÇΩ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ê–ö–¢–ò–í–ù–û–°–¢–¨: –∑–∞–∫–∞–∑—ã=3, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã=0, –∫–æ—Ä–∑–∏–Ω–∞=0
‚úÖ –ù–∞–π–¥–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –Ω–µ–¥–µ–ª–µ 13
```

## üìä –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –Ω–∞–π–¥–µ—Ç

### –î–ª—è –≤–∞—à–µ–≥–æ —Ç–æ–≤–∞—Ä–∞ (–∞–≤–≥—É—Å—Ç 2024):

**–ù–µ–¥–µ–ª—è 13 (6-12 –∞–≤–≥—É—Å—Ç–∞):**
```
üìÖ [Smart Optimization] –ù–µ–¥–µ–ª—è 13: 2024-08-06 - 2024-08-12
   üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã: 0 (analytics - –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
   üìä –ö–æ–Ω–≤–µ—Ä—Å–∏—è: –∑–∞–∫–∞–∑–æ–≤ 0 (analytics - –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
   üìà –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ø—Ä–æ—Å–º–æ—Ç—Ä—ã=0, –∑–∞–∫–∞–∑—ã=0 (nm-report - –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
   üí∞ –ü—Ä–æ–¥–∞–∂–∏ (statistics): –∑–∞–∫–∞–∑–æ–≤=1, —Å—É–º–º–∞=5000‚ÇΩ ‚úÖ
   ‚úÖ –ê–ö–¢–ò–í–ù–û–°–¢–¨: –∑–∞–∫–∞–∑—ã=1
‚úÖ [Smart Optimization] –ù–∞–π–¥–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –Ω–µ–¥–µ–ª–µ 13
```

**–ù–µ–¥–µ–ª—è 14 (13-19 –∞–≤–≥—É—Å—Ç–∞):**
```
üìÖ [Smart Optimization] –ù–µ–¥–µ–ª—è 14: 2024-08-13 - 2024-08-19
   üí∞ –ü—Ä–æ–¥–∞–∂–∏ (statistics): –∑–∞–∫–∞–∑–æ–≤=9, —Å—É–º–º–∞=45000‚ÇΩ ‚úÖ
   ‚úÖ –ê–ö–¢–ò–í–ù–û–°–¢–¨: –∑–∞–∫–∞–∑—ã=9
‚úÖ [Smart Optimization] –ù–∞–π–¥–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –Ω–µ–¥–µ–ª–µ 14
```

**–ù–µ–¥–µ–ª—è 15 (20-26 –∞–≤–≥—É—Å—Ç–∞):**
```
üìÖ [Smart Optimization] –ù–µ–¥–µ–ª—è 15: 2024-08-20 - 2024-08-26
   üí∞ –ü—Ä–æ–¥–∞–∂–∏ (statistics): –∑–∞–∫–∞–∑–æ–≤=9, —Å—É–º–º–∞=45000‚ÇΩ ‚úÖ
   ‚úÖ –ê–ö–¢–ò–í–ù–û–°–¢–¨: –∑–∞–∫–∞–∑—ã=9
‚úÖ [Smart Optimization] –ù–∞–π–¥–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –Ω–µ–¥–µ–ª–µ 15
```

## üîë –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ

### –ë—ã–ª–æ:
```typescript
// –¢–æ–ª—å–∫–æ 1 –∏—Å—Ç–æ—á–Ω–∏–∫
const conversionResponse = await fetch('sales-funnel/products');
if (conversionResponse.ok) {
  // –î–∞–Ω–Ω—ã–µ –µ—Å—Ç—å
} else {
  // –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ‚ùå
}
```

### –°—Ç–∞–ª–æ:
```typescript
// 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å fallback
1. –ü—Ä–æ–±—É–µ–º sales-funnel/products (90 –¥–Ω–µ–π)
2. –ü—Ä–æ–±—É–µ–º nm-report/detail (120 –¥–Ω–µ–π)
3. –ü—Ä–æ–±—É–µ–º statistics/sales (–í–°–Ø –ò–°–¢–û–†–ò–Ø!) ‚úÖ

// –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã 1 –≤–µ—Ä–Ω—É–ª –¥–∞–Ω–Ω—ã–µ ‚Üí –ê–ö–¢–ò–í–ù–û–°–¢–¨ –ù–ê–ô–î–ï–ù–ê!
```

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

```
http://localhost:3000/test-ai-optimization
```

### 3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä

–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä (nmID: 580082172)

### 4. –ù–∞–∂–º–∏—Ç–µ "üß† –£–º–Ω—ã–π –ø–æ–∏—Å–∫"

### 5. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏

–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üìÖ –ù–µ–¥–µ–ª—è 13: 2024-08-06 - 2024-08-12
   üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã: 0
   üìä –ö–æ–Ω–≤–µ—Ä—Å–∏—è: 404 (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥)
   üìà –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: 404 (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥)
   üí∞ –ü—Ä–æ–¥–∞–∂–∏ (statistics): –∑–∞–∫–∞–∑–æ–≤=1, —Å—É–º–º–∞=5000‚ÇΩ ‚úÖ
   ‚úÖ –ê–ö–¢–ò–í–ù–û–°–¢–¨: –∑–∞–∫–∞–∑—ã=1
‚úÖ –ù–∞–π–¥–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!
```

## üìã –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Statistics API

### 1. –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è
- –•—Ä–∞–Ω–∏—Ç **–í–°–ï** –∑–∞–∫–∞–∑—ã —Å –º–æ–º–µ–Ω—Ç–∞ –ø–µ—Ä–≤–æ–π –ø—Ä–æ–¥–∞–∂–∏
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ 90 –¥–Ω–µ–π
- –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –ª—é–±–æ–π –ø–µ—Ä–∏–æ–¥

### 2. –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```json
{
  "nmId": 580082172,
  "date": "2024-08-11",
  "finishedPrice": 5000,
  "priceWithDisc": 4500,
  "quantity": 1,
  "subject": "–í–Ω–µ—à–Ω–∏–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã",
  "category": "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
  "brand": "KH-H2W"
}
```

### 3. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API –¥–ª—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ WB
- –í—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –î–ª—è –≤–∞—à–µ–≥–æ —Ç–æ–≤–∞—Ä–∞ (–∞–≤–≥—É—Å—Ç 2024):

```json
{
  "success": true,
  "strategy": "historical",
  "weeksSearched": 13,
  "dataPoints": 60,
  "message": "–î–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω—ã –∑–∞ 60 –¥–Ω–µ–π –∏–∑ 13 –Ω–µ–¥–µ–ª—å",
  "data": {
    "searchQueries": {
      "total": 0,
      "note": "Analytics API –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –∞–≤–≥—É—Å—Ç"
    },
    "conversion": {
      "totalOrders": 42,
      "totalSum": 210000,
      "source": "statistics API"
    },
    "salesFunnel": {
      "totalDays": 60,
      "history": [
        {
          "date": "2024-08-11",
          "orders": 1
        },
        {
          "date": "2024-08-15",
          "orders": 9
        },
        ...
      ]
    }
  }
}
```

## ‚úÖ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ **–ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–û** –Ω–∞–π–¥–µ—Ç –¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ –±—ã–ª–∏ –ø—Ä–æ–¥–∞–∂–∏:
- ‚úÖ Statistics API —Ö—Ä–∞–Ω–∏—Ç –í–°–Æ –∏—Å—Ç–æ—Ä–∏—é
- ‚úÖ 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å fallback
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- ‚úÖ –ù–∞–π–¥–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –∞–≤–≥—É—Å—Ç 2024

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–µ–π—á–∞—Å - –¥–æ–ª–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ –≤–∞—à–∏ –ø—Ä–æ–¥–∞–∂–∏ —Å –∞–≤–≥—É—Å—Ç–∞!** üéâ
