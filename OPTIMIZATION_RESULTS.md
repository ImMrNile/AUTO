# ‚úÖ –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

## üîç –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏

### 1. Sales Funnel - 400 "excess limit on days"
```
–ü–µ—Ä–∏–æ–¥: 2025-10-07 - 2025-11-03
WB —Å—á–∏—Ç–∞–µ—Ç: 28 –¥–Ω–µ–π –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ
–ù–û –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç! ‚ùå
```

### 2. Campaigns/Keywords - "Unexpected end of JSON input"
```
–û—à–∏–±–∫–∞: Unexpected end of JSON input
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API (204 No Content –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. Sales Funnel - –µ—â–µ —É–º–µ–Ω—å—à–µ–Ω –ø–µ—Ä–∏–æ–¥ ‚úÖ

**–ë—ã–ª–æ:**
```typescript
endDate.setDate(endDate.getDate() - 2);  // –ü–æ–∑–∞–≤—á–µ—Ä–∞
startDate.setDate(startDate.getDate() - 27);  // 28 –¥–Ω–µ–π –Ω–∞–∑–∞–¥

// –ü–µ—Ä–∏–æ–¥: 2025-10-07 - 2025-11-03
// WB —Å—á–∏—Ç–∞–µ—Ç: 28 –¥–Ω–µ–π –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ
// –ü—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç! ‚ùå
```

**–°—Ç–∞–ª–æ:**
```typescript
endDate.setDate(endDate.getDate() - 2);  // –ü–æ–∑–∞–≤—á–µ—Ä–∞
startDate.setDate(startDate.getDate() - 26);  // 27 –¥–Ω–µ–π –Ω–∞–∑–∞–¥

// –ü–µ—Ä–∏–æ–¥: 2025-10-08 - 2025-11-03
// WB —Å—á–∏—Ç–∞–µ—Ç: 27 –¥–Ω–µ–π –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ
// –í –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞! ‚úÖ
```

**–†–∞—Å—á–µ—Ç:**
```
–û—Ç 08.10 –¥–æ 03.11:
08, 09, 10, ..., 01, 02, 03
= 27 –¥–Ω–µ–π (–≤–∫–ª—é—á–∞—è –æ–±–∞ –∫–æ–Ω—Ü–∞)
```

---

### 2. Campaigns - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ ‚úÖ

**–ë—ã–ª–æ:**
```typescript
const campaigns = await campaignsResponse.json();
// ‚ùå –û—à–∏–±–∫–∞ –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –ø—É—Å—Ç–æ–π: "Unexpected end of JSON input"
```

**–°—Ç–∞–ª–æ:**
```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
const responseText = await campaignsResponse.text();
if (!responseText || responseText.trim() === '') {
  console.log(`‚ÑπÔ∏è [Campaign Stats] –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API`);
  return { campaigns: [], message: '–ù–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏' };
}

const campaigns = JSON.parse(responseText);
// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
```

---

### 3. Keyword Stats - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ ‚úÖ

**–ë—ã–ª–æ:**
```typescript
const campaigns = await campaignsResponse.json();
// ‚ùå –û—à–∏–±–∫–∞ –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –ø—É—Å—Ç–æ–π
```

**–°—Ç–∞–ª–æ:**
```typescript
const responseText = await campaignsResponse.text();
if (!responseText || responseText.trim() === '') {
  console.log(`‚ÑπÔ∏è [Keyword Stats] –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API`);
  return { keywords: [], message: '–ù–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏' };
}

const campaigns = JSON.parse(responseText);
// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
```

---

## üìä –ü–µ—Ä–∏–æ–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö API

### Sales Funnel History:
```
–ú–∞–∫—Å–∏–º—É–º: 31 –¥–µ–Ω—å (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ)
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º: 27 –¥–Ω–µ–π
–ü–µ—Ä–∏–æ–¥: –ø–æ–∑–∞–≤—á–µ—Ä–∞ - 27 –¥–Ω–µ–π –Ω–∞–∑–∞–¥

–ü—Ä–∏–º–µ—Ä:
–°–µ–≥–æ–¥–Ω—è: 05.11.2025
–ü–æ–∑–∞–≤—á–µ—Ä–∞: 03.11.2025
27 –¥–Ω–µ–π –Ω–∞–∑–∞–¥: 08.10.2025
–ü–µ—Ä–∏–æ–¥: 08.10 - 03.11 = 27 –¥–Ω–µ–π ‚úÖ
```

### Conversion Data:
```
–ü–µ—Ä–∏–æ–¥: 30 –¥–Ω–µ–π
selectedPeriod: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
pastPeriod: –ø—Ä–µ–¥—ã–¥—É—â–∏–µ 30 –¥–Ω–µ–π (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
```

### Campaign Stats:
```
–ü–µ—Ä–∏–æ–¥: 30 –¥–Ω–µ–π
from: 30 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
to: –≤—á–µ—Ä–∞
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
npm run dev
```

### –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:
```
http://localhost:3000/test-ai-optimization
```

### –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
‚úÖ üìä –ö–æ–Ω–≤–µ—Ä—Å–∏—è - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
‚úÖ üì¢ –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
‚úÖ üõí –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
‚úÖ üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
```

---

## üìã –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ:
```
üîç [Search Queries] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
‚úÖ [Search Queries] –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã

üìä [Conversion] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
‚úÖ [Conversion] –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã

üì¢ [Campaign Stats] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
üìä [Campaign Stats] –í—Å–µ–≥–æ –∫–∞–º–ø–∞–Ω–∏–π: 27
üìä [Campaign Stats] –ü–æ–ª—É—á–µ–Ω–æ –∫–∞–º–ø–∞–Ω–∏–π: 27
üéØ [Campaign Stats] –ö–∞–º–ø–∞–Ω–∏–π —Å —Ç–æ–≤–∞—Ä–æ–º 493805274: 3
‚úÖ [Campaign Stats] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞

üõí [Sales Funnel] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
üìÖ [Sales Funnel] –ü–µ—Ä–∏–æ–¥: 2025-10-08 - 2025-11-03
‚úÖ [Sales Funnel] –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã

üîë [Keyword Stats] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
üìä [Keyword Stats] –ü–æ–ª—É—á–µ–Ω–æ –∫–∞–º–ø–∞–Ω–∏–π: 27
üéØ [Keyword Stats] –ö–∞–º–ø–∞–Ω–∏–π —Å —Ç–æ–≤–∞—Ä–æ–º 493805274: 3
‚úÖ [Keyword Stats] –ü–æ–ª—É—á–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: 3

üìä [Optimization Data] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
   üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã: ‚úÖ
   üìä –ö–æ–Ω–≤–µ—Ä—Å–∏—è: ‚úÖ
   üì¢ –ö–∞–º–ø–∞–Ω–∏–∏: ‚úÖ
   üõí –í–æ—Ä–æ–Ω–∫–∞: ‚úÖ
   üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: ‚úÖ
```

### –ï—Å–ª–∏ –Ω–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π:
```
üì¢ [Campaign Stats] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
üìä [Campaign Stats] –í—Å–µ–≥–æ –∫–∞–º–ø–∞–Ω–∏–π: 27
‚ÑπÔ∏è [Campaign Stats] –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API
```

---

## ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã ‚úÖ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ `orderBy` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
- ‚úÖ –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ = –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö (–Ω–æ—Ä–º–∞)

### 2. –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ ‚úÖ
- ‚úÖ `selectedPeriod` + `pastPeriod`
- ‚úÖ `orderBy` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π
- ‚úÖ –ü–µ—Ä–∏–æ–¥ 30 –¥–Ω–µ–π

### 3. –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ ‚úÖ
- ‚úÖ POST –º–µ—Ç–æ–¥ (–Ω–µ GET)
- ‚úÖ Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã + body
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–æ–≤–∞—Ä—É

### 4. –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ ‚úÖ
- ‚úÖ `selectedPeriod` (–Ω–µ `period`)
- ‚úÖ –ü–µ—Ä–∏–æ–¥ 27 –¥–Ω–µ–π (–Ω–µ 28, –Ω–µ 29, –Ω–µ 30)
- ‚úÖ –ü–æ–∑–∞–≤—á–µ—Ä–∞ (–¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã)

### 5. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ‚úÖ
- ‚úÖ POST –º–µ—Ç–æ–¥
- ‚úÖ Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã + body
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–æ–≤–∞—Ä—É

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–∏–æ–¥–æ–≤

| API Endpoint | –ü–µ—Ä–∏–æ–¥ | –§–æ—Ä–º–∞—Ç | –õ–∏–º–∏—Ç |
|--------------|--------|--------|-------|
| Search Queries | 30 –¥–Ω–µ–π | `currentPeriod` | 365 –¥–Ω–µ–π |
| Conversion | 30 + 30 –¥–Ω–µ–π | `selectedPeriod` + `pastPeriod` | 365 –¥–Ω–µ–π |
| Sales Funnel | **27 –¥–Ω–µ–π** | `selectedPeriod` | **31 –¥–µ–Ω—å** |
| Campaign Stats | 30 –¥–Ω–µ–π | `from` + `to` | 31 –¥–µ–Ω—å |
| Keyword Stats | 30 –¥–Ω–µ–π | `dates.from` + `dates.to` | 31 –¥–µ–Ω—å |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. –ü–µ—Ä–∏–æ–¥ –¥–ª—è Sales Funnel
```
‚ùå 30 –¥–Ω–µ–π - –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç
‚ùå 29 –¥–Ω–µ–π - –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç
‚ùå 28 –¥–Ω–µ–π - –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç
‚úÖ 27 –¥–Ω–µ–π - —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

### 2. –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API
```
–ù–µ –æ—à–∏–±–∫–∞, –∞ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:
- –ù–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥
- –¢–æ–≤–∞—Ä –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –∫–∞–º–ø–∞–Ω–∏—è—Ö
```

### 3. –î–∞–Ω–Ω—ã–µ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
```
–°–µ–≥–æ–¥–Ω—è: –¥–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤—ã
–í—á–µ—Ä–∞: –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ –≥–æ—Ç–æ–≤—ã
–ü–æ–∑–∞–≤—á–µ—Ä–∞: –¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã ‚úÖ
```

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!

### –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ HTTP –º–µ—Ç–æ–¥—ã (POST/GET)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã (27 –¥–Ω–µ–π –¥–ª—è –≤–æ—Ä–æ–Ω–∫–∏)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–æ–≤–∞—Ä–∞–º

### –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- ‚úÖ –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
- ‚úÖ –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞

**–í—Å–µ 5 API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫!** üéâ

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–¥–µ–ª–∞–Ω—ã —Å—Ç—Ä–æ–≥–æ –ø–æ:
- https://dev.wildberries.ru/en/openapi/analytics
- https://dev.wildberries.ru/en/openapi/promotion

**–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ WB API!** ‚úÖ
