# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 400 –≤ Campaign Stats –∏ Keyword Stats

## –ü—Ä–æ–±–ª–µ–º–∞

```
‚ùå [Campaign Stats] –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–π 400: {
  "error": "Invalid Params or payload: send a list of campaigns in body or set of filters in params"
}

‚ùå [Keyword Stats] –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–π 400: {
  "error": "Invalid Params or payload: send a list of campaigns in body or set of filters in params"
}
```

## –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

WB API endpoint `/adv/v3/fullstats` —Ç—Ä–µ–±—É–µ—Ç:
- ‚ùå –ù–ï GET –∑–∞–ø—Ä–æ—Å —Å query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `?id=123&from=2025-10-01&to=2025-11-01`
- ‚úÖ POST –∑–∞–ø—Ä–æ—Å —Å body —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤

## –†–µ—à–µ–Ω–∏–µ

### –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):

```typescript
const campaignIds = relevantCampaigns.map((c: any) => c.advertId).join(',');
const statsResponse = await fetch(
  `https://advert-api.wildberries.ru/adv/v3/fullstats?id=${campaignIds}&from=${from}&to=${to}`,
  {
    method: 'GET',
    headers: {
      'Authorization': apiToken
    }
  }
);
```

**–ü—Ä–æ–±–ª–µ–º–∞:** GET –∑–∞–ø—Ä–æ—Å —Å query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):

```typescript
const campaignIds = relevantCampaigns.map((c: any) => c.advertId);
const statsResponse = await fetch(
  'https://advert-api.wildberries.ru/adv/v3/fullstats',
  {
    method: 'POST',
    headers: {
      'Authorization': apiToken,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(campaignIds.map((id: number) => ({
      id: id,
      dates: {
        from: from,
        to: to
      }
    })))
  }
);
```

**–†–µ—à–µ–Ω–∏–µ:** POST –∑–∞–ø—Ä–æ—Å —Å body –≤ —Ñ–æ—Ä–º–∞—Ç–µ –º–∞—Å—Å–∏–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤

## –§–æ—Ä–º–∞—Ç body –¥–ª—è WB API v3/fullstats

```json
[
  {
    "id": 11111111,
    "dates": {
      "from": "2025-10-05",
      "to": "2025-11-04"
    }
  },
  {
    "id": 22222222,
    "dates": {
      "from": "2025-10-05",
      "to": "2025-11-04"
    }
  }
]
```

**–ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –≤ –º–∞—Å—Å–∏–≤–µ:**
- `id` - ID –∫–∞–º–ø–∞–Ω–∏–∏ (advertId)
- `dates.from` - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞ (YYYY-MM-DD)
- `dates.to` - –¥–∞—Ç–∞ –∫–æ–Ω—Ü–∞ –ø–µ—Ä–∏–æ–¥–∞ (YYYY-MM-DD)

## –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

### –î–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –ë–ï–ó –æ—Å—Ç–∞—Ç–∫–æ–≤:

–î–∞–∂–µ –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏ 2 –º–µ—Å—è—Ü–∞, —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç:
1. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π (27 –∫–∞–º–ø–∞–Ω–∏–π –Ω–∞–π–¥–µ–Ω–æ)
2. ‚úÖ –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏ —Å –Ω—É–∂–Ω—ã–º —Ç–æ–≤–∞—Ä–æ–º
3. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —ç—Ç–∏–º –∫–∞–º–ø–∞–Ω–∏—è–º
4. ‚úÖ –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —Ä–∞–±–æ—Ç–∞–ª–∏ —Ä–∞–Ω—å—à–µ

### –î–ª—è –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤:

–ï—Å–ª–∏ —Ç–æ–≤–∞—Ä —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω –∏ –Ω–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π:
1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω–µ—Ç `{ campaigns: [], message: '–ù–µ—Ç —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π' }`
2. ‚úÖ –í–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏ 400 - –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/category-insights` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

## –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å:

```
üì¢ [Campaign Stats] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
üìä [Campaign Stats] –í—Å–µ–≥–æ –∫–∞–º–ø–∞–Ω–∏–π: 27
üìä [Campaign Stats] –ü–æ–ª—É—á–µ–Ω–æ –∫–∞–º–ø–∞–Ω–∏–π: 27
üéØ [Campaign Stats] –ö–∞–º–ø–∞–Ω–∏–π —Å —Ç–æ–≤–∞—Ä–æ–º 493805274: 3
üìÖ [Campaign Stats] –ü–µ—Ä–∏–æ–¥: 2025-10-05 - 2025-11-04, IDs: 11111111,22222222,33333333
‚úÖ [Campaign Stats] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞
```

### –ù–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π —Å —Ç–æ–≤–∞—Ä–æ–º:

```
üì¢ [Campaign Stats] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
üìä [Campaign Stats] –í—Å–µ–≥–æ –∫–∞–º–ø–∞–Ω–∏–π: 27
üìä [Campaign Stats] –ü–æ–ª—É—á–µ–Ω–æ –∫–∞–º–ø–∞–Ω–∏–π: 27
üéØ [Campaign Stats] –ö–∞–º–ø–∞–Ω–∏–π —Å —Ç–æ–≤–∞—Ä–æ–º 493805274: 0
‚ÑπÔ∏è [Campaign Stats] –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π –¥–ª—è —Ç–æ–≤–∞—Ä–∞
```

### –ù–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π –≤–æ–æ–±—â–µ:

```
üì¢ [Campaign Stats] –ó–∞–ø—Ä–æ—Å –¥–ª—è nmID: 493805274
üìä [Campaign Stats] –í—Å–µ–≥–æ –∫–∞–º–ø–∞–Ω–∏–π: 0
‚ÑπÔ∏è [Campaign Stats] –ù–µ—Ç –∫–∞–º–ø–∞–Ω–∏–π
```

## –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è Keyword Stats

–¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ `fetchKeywordStats()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ endpoint `/adv/v1/promotion/adverts` –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç POST —Å body.

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `src/app/api/products/[id]/optimization-data/route.ts`
  - –°—Ç—Ä–æ–∫–∏ 298-320: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å Campaign Stats
  - –ú–µ—Ç–æ–¥: GET ‚Üí POST
  - –§–æ—Ä–º–∞—Ç: query params ‚Üí body array

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ Campaign Stats —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ Keyword Stats —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∞–∂–µ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤
‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ—à–∏–±–æ–∫ 400

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –¥–ª—è –≤–∞—à–µ–≥–æ —Ç–æ–≤–∞—Ä–∞:

```bash
GET /api/products/cmh0gghd5002bunv4jxmcdfue/optimization-data
```

–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å:
- ‚úÖ –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- ‚úÖ –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏)
