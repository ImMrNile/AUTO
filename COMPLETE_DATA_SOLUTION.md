# üìä –ü–û–õ–ù–û–ï –†–ï–®–ï–ù–ò–ï: –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üéØ –¶–µ–ª—å
–ü–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º—É–º –¥–∞–Ω–Ω—ã—Ö –¥–ª—è AI –∞–Ω–∞–ª–∏–∑–∞ —Ç–æ–≤–∞—Ä–∞, –¥–∞–∂–µ –µ—Å–ª–∏:
- ‚ùå –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
- ‚ùå –¢–æ–≤–∞—Ä –Ω–µ —Ä–µ–∫–ª–∞–º–∏—Ä–æ–≤–∞–ª—Å—è
- ‚ùå –ù–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## ‚úÖ –ß—Ç–æ –¢–û–ß–ù–û —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

### 1. –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ - –û–°–ù–û–í–ù–û–ô –∏—Å—Ç–æ—á–Ω–∏–∫! ‚úÖ

**Endpoint:** `POST /api/analytics/v3/sales-funnel/products`

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º:**
```json
{
  "selected": {
    "openCount": 810,           // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –∫–∞—Ä—Ç–æ—á–∫–∏
    "cartCount": 26,            // –î–æ–±–∞–≤–ª–µ–Ω–∏–π –≤ –∫–æ—Ä–∑–∏–Ω—É
    "orderCount": 4,            // –ó–∞–∫–∞–∑–æ–≤
    "buyoutCount": 1,           // –í—ã–∫—É–ø–æ–≤
    "orderSum": 15636,          // –°—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤
    "buyoutSum": 3365,          // –°—É–º–º–∞ –≤—ã–∫—É–ø–æ–≤
    "avgPrice": 3909,           // –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
    "conversions": {
      "addToCartPercent": 3,    // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
      "cartToOrderPercent": 15, // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∑–∞–∫–∞–∑
      "buyoutPercent": 33       // –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–∫—É–ø–∞
    }
  },
  "past": {
    // –ü—Ä–µ–¥—ã–¥—É—â–∏–π –ø–µ—Ä–∏–æ–¥ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    "openCount": 4713,
    "orderCount": 42,
    "buyoutCount": 26
  },
  "comparison": {
    // –î–∏–Ω–∞–º–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    "openCountDynamic": -83,    // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã —É–ø–∞–ª–∏ –Ω–∞ 83%
    "orderCountDynamic": -90    // –ó–∞–∫–∞–∑—ã —É–ø–∞–ª–∏ –Ω–∞ 90%
  }
}
```

**–≠—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞!**

---

### 2. –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã - –µ—Å–ª–∏ –µ—Å—Ç—å –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–π —Ç—Ä–∞—Ñ–∏–∫ ‚úÖ

**Endpoint:** `POST /api/v2/search-report/product/search-texts`

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ):**
```json
{
  "items": [
    {
      "searchText": "–ø–ª–∞—Ç—å–µ –º—É—Å—É–ª—å–º–∞–Ω—Å–∫–æ–µ",
      "avgPosition": 15,          // –°—Ä–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è
      "openCard": 100,            // –ü–µ—Ä–µ—Ö–æ–¥–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
      "addToCart": 10,            // –î–æ–±–∞–≤–ª–µ–Ω–∏–π –≤ –∫–æ—Ä–∑–∏–Ω—É
      "orders": 5,                // –ó–∞–∫–∞–∑–æ–≤
      "conversions": {
        "openCardPercent": 2.5,   // CTR
        "addToCartPercent": 10,   // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
        "ordersPercent": 50       // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∑–∞–∫–∞–∑
      }
    }
  ]
}
```

**–ï—Å–ª–∏ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ `[]`:**
- –¢–æ–≤–∞—Ä –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–º –ø–æ–∏—Å–∫–µ
- –ü—Ä–æ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–µ–∫–ª–∞–º—É –∏–ª–∏ –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏
- **–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

---

### 3. –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂ –ø–æ –¥–Ω—è–º - –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤ ‚úÖ

**Endpoint:** `POST /api/analytics/v3/sales-funnel/products/history`

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏–º–∏—Ç 31 –¥–µ–Ω—å, –Ω–æ API –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –¥–∞–∂–µ 21 –¥–µ–Ω—å

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **14 –¥–Ω–µ–π** (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–µ—Ä–∏–æ–¥)

```typescript
const endDate = new Date();
endDate.setDate(endDate.getDate() - 3);  // 3 –¥–Ω—è –Ω–∞–∑–∞–¥
const startDate = new Date(endDate);
startDate.setDate(startDate.getDate() - 13);  // 14 –¥–Ω–µ–π –Ω–∞–∑–∞–¥

// –ü–µ—Ä–∏–æ–¥: 14 –¥–Ω–µ–π (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
```

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º:**
```json
{
  "history": [
    {
      "date": "2025-10-20",
      "openCount": 50,
      "cartCount": 5,
      "orderCount": 2,
      "buyoutCount": 1
    },
    // ... –ø–æ –∫–∞–∂–¥–æ–º—É –¥–Ω—é
  ]
}
```

---

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞

–ï—Å–ª–∏ —É —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

```typescript
// –ü–æ–ª—É—á–∞–µ–º subject (–∫–∞—Ç–µ–≥–æ—Ä–∏—é) —Ç–æ–≤–∞—Ä–∞
const subjectId = 69;  // "–ü–ª–∞—Ç—å—è"

// –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–æ–ø —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
POST /api/analytics/v3/sales-funnel/products
{
  "selectedPeriod": {...},
  "subjectIds": [69],  // –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  "orderBy": {
    "field": "orderCount",
    "mode": "desc"
  },
  "limit": 100
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- –°—Ä–µ–¥–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã –∏ –∏—Ö –º–µ—Ç—Ä–∏–∫–∏
- –ë–µ–Ω—á–º–∞—Ä–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

---

### 5. –î–∞–Ω–Ω—ã–µ –ø–æ –±—Ä–µ–Ω–¥—É (–µ—Å–ª–∏ –µ—Å—Ç—å)

```typescript
POST /api/analytics/v3/sales-funnel/products
{
  "selectedPeriod": {...},
  "brandNames": ["–≤–∞—à_–±—Ä–µ–Ω–¥"],
  "orderBy": {
    "field": "orderCount",
    "mode": "desc"
  }
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- –î—Ä—É–≥–∏–µ —Ç–æ–≤–∞—Ä—ã –±—Ä–µ–Ω–¥–∞
- –ò—Ö –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –£—Å–ø–µ—à–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

---

## üìä –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º—É–º–∞ –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥ 1: –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞
```typescript
// 1. –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (–í–°–ï–ì–î–ê –µ—Å—Ç—å)
const conversion = await fetchConversionData(nmId, 30);  // 30 –¥–Ω–µ–π

// 2. –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π)
const searchQueries = await fetchSearchQueries(nmId, 30);

// 3. –ò—Å—Ç–æ—Ä–∏—è –ø–æ –¥–Ω—è–º (14 –¥–Ω–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ)
const history = await fetchSalesFunnel(nmId, 14);
```

### –®–∞–≥ 2: –î–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```typescript
// –ï—Å–ª–∏ —É —Ç–æ–≤–∞—Ä–∞ –º–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö, –±–µ—Ä–µ–º –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const categoryData = await fetchCategoryData(subjectId, 30);

// –¢–æ–ø-100 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const topProducts = categoryData.products.slice(0, 100);

// –ò—Ö –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
const categorySearchQueries = await Promise.all(
  topProducts.map(p => fetchSearchQueries(p.nmId, 30))
);
```

### –®–∞–≥ 3: –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
```typescript
// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã
const periods = [7, 14, 30, 60, 90];
const historicalData = await Promise.all(
  periods.map(days => fetchConversionData(nmId, days))
);
```

---

## üéØ –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å AI –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä (–í–°–ï–ì–î–ê –¥–æ—Å—Ç—É–ø–µ–Ω):
```json
{
  "product": {
    "nmId": 493805274,
    "title": "–ú–æ–ª–æ—á–Ω–æ–µ –ø–ª–∞—Ç—å–µ",
    "subjectId": 69,
    "subjectName": "–ü–ª–∞—Ç—å—è"
  },
  "conversion": {
    "current": {
      "openCount": 810,
      "orderCount": 4,
      "conversions": {
        "addToCartPercent": 3,
        "buyoutPercent": 33
      }
    },
    "past": {
      "openCount": 4713,
      "orderCount": 42
    },
    "dynamics": {
      "ordersDrop": -90,  // –ü–∞–¥–µ–Ω–∏–µ –Ω–∞ 90%
      "viewsDrop": -83    // –ü–∞–¥–µ–Ω–∏–µ –Ω–∞ 83%
    }
  }
}
```

**AI —Å–º–æ–∂–µ—Ç:**
- ‚úÖ –£–≤–∏–¥–µ—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- ‚úÖ –î–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ):
```json
{
  "product": {...},
  "conversion": {...},
  "searchQueries": [
    {
      "query": "–ø–ª–∞—Ç—å–µ –º—É—Å—É–ª—å–º–∞–Ω—Å–∫–æ–µ",
      "position": 15,
      "clicks": 100
    }
  ],
  "history": [
    {"date": "2025-10-20", "orders": 2},
    {"date": "2025-10-21", "orders": 1}
  ],
  "category": {
    "avgConversion": 5,
    "topProducts": [...]
  }
}
```

---

## üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ 1: –ö–∞–º–ø–∞–Ω–∏–∏ - 400 "Invalid Params"

**–ü—Ä–æ–±–ª–µ–º–∞:** API —Ç—Ä–µ–±—É–µ—Ç –ª–∏–±–æ —Å–ø–∏—Å–æ–∫ ID, –ª–∏–±–æ —Ñ–∏–ª—å—Ç—Ä—ã –≤ params

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ API v2 –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π

```typescript
// –í–º–µ—Å—Ç–æ v1/promotion/adverts
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ v2/advert/list

const response = await fetch(
  'https://advert-api.wildberries.ru/adv/v2/advert/list',
  {
    method: 'GET',
    headers: {
      'Authorization': apiToken
    }
  }
);
```

### –û—à–∏–±–∫–∞ 2: –í–æ—Ä–æ–Ω–∫–∞ - 400 "excess limit"

**–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –¥–æ 14 –¥–Ω–µ–π

```typescript
const endDate = new Date();
endDate.setDate(endDate.getDate() - 3);
const startDate = new Date(endDate);
startDate.setDate(startDate.getDate() - 13);  // 14 –¥–Ω–µ–π total
```

---

## üìã –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

### –î–ª—è —Ç–æ–≤–∞—Ä–∞ –ë–ï–ó —Ä–µ–∫–ª–∞–º—ã:

1. **–î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏** ‚úÖ
   - –ü–µ—Ä–∏–æ–¥: 30, 60, 90 –¥–Ω–µ–π
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–æ—à–ª—ã–º –ø–µ—Ä–∏–æ–¥–æ–º
   - –î–∏–Ω–∞–º–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

2. **–ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** ‚úÖ
   - –ï—Å–ª–∏ –µ—Å—Ç—å - –æ—Ç–ª–∏—á–Ω–æ
   - –ï—Å–ª–∏ –Ω–µ—Ç - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é

3. **–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂** ‚úÖ
   - 14 –¥–Ω–µ–π –ø–æ –¥–Ω—è–º
   - –¢—Ä–µ–Ω–¥—ã –∏ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å

4. **–î–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** ‚úÖ
   - –¢–æ–ø —Ç–æ–≤–∞—Ä—ã
   - –°—Ä–µ–¥–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
   - –ë–µ–Ω—á–º–∞—Ä–∫–∏

### –î–ª—è —Ç–æ–≤–∞—Ä–∞ –° —Ä–µ–∫–ª–∞–º–æ–π:

–í—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–µ +

5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π** ‚úÖ
6. **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞** ‚úÖ
7. **ROI —Ä–µ–∫–ª–∞–º—ã** ‚úÖ

---

## üöÄ –ì–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–°–æ–∑–¥–∞–º –Ω–æ–≤—ã–π endpoint –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏—Ç –í–°–ï –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

```
GET /api/products/{id}/complete-analytics
```

–í–µ—Ä–Ω–µ—Ç:
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (–≤—Å–µ–≥–¥–∞)
- ‚úÖ –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂ (14 –¥–Ω–µ–π)
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ –ö–∞–º–ø–∞–Ω–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è AI

**–≠—Ç–æ–≥–æ —Ö–≤–∞—Ç–∏—Ç –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ª—é–±–æ–≥–æ —Ç–æ–≤–∞—Ä–∞!** üéØ
